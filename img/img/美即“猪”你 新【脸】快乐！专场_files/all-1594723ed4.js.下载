!function(){"use strict";function createCommonjsModule(e,t){return t={exports:{}},e(t,t.exports),t.exports}function cookie(e,t,n){if("undefined"==typeof t){var i=null;if(document.cookie&&""!==document.cookie)for(var a=document.cookie.split(";"),r=0;r<a.length;r++){var o=a[r].trim();if(o.substring(0,e.length+1)===e+"="){i=decodeURIComponent(o.substring(e.length+1));break}}return i}n=n||{},null===t&&(t="",n.expires=-1);var s="";if(n.expires&&("number"==typeof n.expires||n.expires.toUTCString)){var c;"number"==typeof n.expires?(c=new Date,c.setTime(c.getTime()+24*n.expires*60*60*1e3)):c=n.expires,s="; expires="+c.toUTCString()}var d=n.path?"; path="+n.path:"",l=n.domain?"; domain="+n.domain:"",u=n.secure?"; secure":"";document.cookie=[e,"=",encodeURIComponent(t),s,d,l,u].join("")}function stringToDate(e){var t="undefined"==typeof e?"undefined":_typeof(e);if("undefined"===t)return new Date;if("object"===t)return e;var n=Date.parse(e),i=new Date(n);if(isNaN(i)){e=e.replace(/:/g,"-"),e=e.replace(" ","-"),e=e.replace(".","-");var a=e.split("-");switch(a.length){case 7:i=new Date(a[0],(--a[1]),a[2],a[3],a[4],a[5],a[6]);break;case 6:i=new Date(a[0],(--a[1]),a[2],a[3],a[4],a[5]);break;default:i=new Date(a[0],(--a[1]),a[2])}}return i}function loadScript(e,t){var n=document.createElement("script");n.type="text/javascript",n.onload=function(){t()},n.src=e,document.body.appendChild(n)}function sliceArr(e,t){var n=[];t=t||1;for(var i=0;i<Math.ceil(e.length/t);i++){var a=i*t,r=a+t;n.push(e.slice(a,r))}return n}function getQueryStringByUrl(e,t){var n=new RegExp("(^|&)"+t+"=([^&]*)(&|$)"),i=e.split("?")[1];if(i){var a=e.split("?")[1].match(n);if(null!=a)return decodeURIComponent(a[2])}return""}function getQueryString(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),n=window.location.search.substr(1).match(t);return null!=n?decodeURIComponent(n[2]):null}function checkUrlContainParam(e,t){if(!e||""===e)return!1;var n=e.split("?"),i=new RegExp("(^|&)"+t+"=([^&]*)(&|$)");return!(!n[1]||!i.test(n[1]))}function replaceUrlParamVal(e,t,n){if(!e||""===e)return e;var i=e,a=i.split("?"),r=new RegExp("(^|&)"+t+"=([^&]*)(&|$)"),o=i;return a[1]&&r.test(a[1])&&(o=a[0]+"?"+a[1].replace(r,"$1"+t+"="+n+"$3")),o}function compareVersion(e,t){if(!e)return 0;e=e.replace(/^8./,"").split("."),t=t.split(".");for(var n,i,a=0,r=Math.max(e.length,t.length),o=0;o<r;o++){if(n=parseInt(e[o],10),i=parseInt(t[o],10),n=n?n:0,i=i?i:0,n>i){a=1;break}if(n<i){a=0;break}a=1}return a}function fixImg(e,t){var n=e,i=window;return i.h2ImgA=window.h2ImgA||"//"+HOST.IMG_A,e&&""!==e&&/(\.jpg|\.png|\.gif|\.webp)$/.test(e)?(/^(http(s)?:)?\/\//.test(n)?(e=e.replace(/^http:/,""),e="brand"===t||"logo"===t||"store_logo"===t?e.replace(/c.vpimg(\d).com/,"a$1.vimage1.com/upload/brand").replace(/[av].vpimg(\d).com/,"a$1.vimage1.com"):e.replace(/[a-cv].vpimg(\d).com/,"a$1.vimage1.com")):e="2"===window.config.extend["switch"].is_img_h2_static?"//a.appsimg.com/upload/brand/"+e:i.h2ImgA+"/upload/brand/"+e,"brand"!==t&&"product"!==t&&"store_logo"!==t||(e=VIP.getClientImageSrc(e,t)),e):""}function safeGet(e,t,n,i){for(var a=n.name.toLowerCase(),r=t.split("."),o=function(e){console.warn(e)},s=function(e){return(new n).valueOf()},c=function(e,t){var i="undefined"==typeof p?"undefined":_typeof(p);return i===a||p instanceof n||(o(t+" 类型不合法，应为 "+n.name),e=void 0!==e&&null!==e?new n(e).valueOf():s()),e},d=function(e,t){return!("function"==typeof i&&!i(e))||(o(t+" 格式不合法"),!1)},l=function(e){return r.slice(0,e).join(".")},u=function(e,t,n){return"object"!==("undefined"==typeof e?"undefined":_typeof(e))?(o(l(n)+" 应为 object 类型"),!1):!!e.hasOwnProperty(t)||(o(l(n)+" 不存在"),!1)},p=void 0,f=r.length-1,g=!0,_=0,m=e;_<r.length;_++){var h=r[_],v=u(m,h,_);if(!v)break;p=m[h],_===f?(p=c(p,t),v=d(p,t)):m=p}return g?p:s()}function throttle(e,t){var n,i,a,r=0,o=function(){r=+new Date,n=null,e.apply(i,a)},s=function(){var s=+new Date,c=t-(s-r);i=this,a=arguments,c<=0||c>t?(n&&(clearTimeout(n),n=null),r=s,e.apply(i,a)):n||(n=setTimeout(o,c))};return s.cancel=function(){clearTimeout(n),r=0,n=null},s}function debounce(e,t,n){var i,a,r=function(){var r=this,o=arguments;if(i&&clearTimeout(i),n){var s=!i;i=setTimeout(function(){i=null},t),s&&(a=e.apply(r,o))}else i=setTimeout(function(){e.apply(r,o)},t);return a};return r.cancel=function(){clearTimeout(i),i=null},r}function curry(e,t){var n=e.length;return t=t||[],function(){var i,a,r=t.slice(0);for(a=0;a<arguments.length;a++)i=arguments[a],r.push(i);return r.length<n?curry.call(this,e,r):e.apply(this,r)}}function getSpecialUrlById(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;e=e||t;var i=window.mstHost+"/uploadfiles/exclusive_subject/te/v1/"+e+".php?wapid=mst_"+t+"&extra_banner=0&mst_cdi=1&mst_page_type=guide&extra_type="+n;return i}function isImg(e){if(!e||""===e||"string"!=typeof e)return!1;var t=/(\.jpg|\.png|\.gif|\.webp)$/,n=t.test(e.toLowerCase());return n}function getRouterClient(){var e;return e=VIP.defaultParam.is_app?"app":VIP.defaultParam.is_liteapp?LITEAPPCLIENT.LITEAPP:"wap"}function parserUrlParam(e){if(e){var t,n,i,a=e.split("?")[1].split("&"),r={},o=[];r.url=encodeURIComponent(e.split("?")[0]);for(var s=0;s<a.length;s++)t=a[s].split("="),n=t[0],i=t[1],""===n&&(n="unkown"),"undefined"==typeof r[n]?r[n]=i:"string"==typeof r[n]?(r[n]=[r[n]],r[n].push(i)):r[n].push(i);var c=function(e){return"string"!=typeof e||/\d+/.test(e)?e instanceof Array?"["+e+"]":e:"'"+e+"'"};return r.toString=function(){for(var e in r)o.push(e+":"+c(r[e]));return"{"+o.join(",")+"}"},r}}function fixClient(e){return e=e===LITEAPPCLIENT.OLD_NAME?LITEAPPCLIENT.LITEAPP:e}function addParamToUrl(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(!e)return e;if(e.indexOf(t+"=")===-1&&t&&n){var i=e.indexOf("?")===-1?"?":"&";e+=i+t+"="+n}return e}function stopScrollByAndroid(e){if(VIP.defaultParam.is_android&&e&&e.length){var t={FORBID:"1",RELEASE:"0"},n=e[0],i=function(e){VIP.hercules({type:"base",name:"emitEvent",param:{event:"base.captureEvent",data:{captureEvent:e}},succ:function(e){},fali:function(e){}})};n.addEventListener("touchstart",function(e){i(t.FORBID)}),n.addEventListener("touchend",function(e){i(t.RELEASE)})}}function notFrontGetAreaId(e){var t={VIP_NH:{area_id:"104104",name:"广东"},VIP_BJ:{area_id:"101101",name:"北京"},VIP_SH:{area_id:"103101",name:"上海"},VIP_CD:{area_id:"105101",name:"四川"},VIP_HZ:{area_id:"104102",name:"湖北"}};return t[e].area_id}function getFdcAreaId(e){var t=VIP.defaultParam;return e=e||t.warehouse,"background"===VIP.getConfigValueByKey("data","page_data","page_show_type")?notFrontGetAreaId(e):VIP.getQueryString("fdc_area_id")||VIP.cookie("fdc_area_id")}function maskVersionB(e){var t=VIP.defaultParam.is_app,n=VIP.compareVersion(VIP.defaultParam.app_version,"6.14"),i=String(e).length,a=!1;return t&&!n&&i>10&&(a=!0),console.log("productLen",i),console.log("overVersion",n),console.log("isErr",a),a}function getConfigValueByKey(){if(!window.config)return"";for(var e=window.config,t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return $.each(n,function(t,n){e=e[n]?e[n]:""}),e}function getIdByUrl(e){if(!e||""===e)return 0;var t,n,i=/(.*\/){0,}([^.]+).*/gi,a=0;return e.indexOf("msp.appvipshop.com")>-1?e.indexOf("/cmstopic/")>-1?a=e.replace(i,"$2"):e.indexOf("/vis/")>-1?(t=/\/pages\/(\d+)\//,a=e.match(t)[1]):e.indexOf("wapid=mzt")>-1&&(a=getQueryStringByUrl(e,"wapid")):e.indexOf("mst.vip.com")>-1?(n=e.split("?")[0].match(/mst.vip.com\/cmstopic\/index\/s\/(\w+)/),a=n&&n[1]?"shortmst_"+n[1]:getQueryStringByUrl(e,"wapid"),getQueryStringByUrl(e,"extra_landing_abtest_id")&&getQueryStringByUrl(e,"extra_landing_rule_id")&&getQueryStringByUrl(e,"extra_product_id")&&(a=a+"_"+getQueryStringByUrl(e,"extra_landing_abtest_id")+"_"+getQueryStringByUrl(e,"extra_landing_rule_id")+"_"+getQueryStringByUrl(e,"extra_product_id"))):e.indexOf("ma.vip.com")>-1?a=getQueryStringByUrl(e,"wapid"):e.indexOf("viva.vip.com")>-1?a=getQueryStringByUrl(e,"wapid"):e.indexOf("mzt.vip.com")>-1?a=getQueryStringByUrl(e,"wapid"):e.indexOf("rank.vip.com")>-1?getQueryStringByUrl(e,"wapid")?a=getQueryStringByUrl(e,"wapid"):getQueryStringByUrl(e,"rankCode")&&getQueryStringByUrl(e,"col_catid")&&(a=getQueryStringByUrl(e,"rankCode")+"_"+getQueryStringByUrl(e,"col_catid")):a=getQueryStringByUrl(e,"wapid"),a=""===a?0:a}function handleUrlParam(e,t){if(!e||""===e)return e;var n=VIP.defaultParam,i=e.indexOf("?")>-1,a=["width","height","client","source","warehouse","area_id","net","mars_cid","is_preload","newcustomer","wap_consumer","app_version","extra_tag","extra_banner","protocol_version","app_name","mobile_platform","fdc_area_id","mobile_channel","vipruid","oxo_province_id","oxo_city_id","oxo_district_id"],r="";return t=t||"blank",e+=i?"&":"?",e+=n.is_app&&"blank"===t?"m=webview&":"",$.each(a,function(t,i){n[i]&&(checkUrlContainParam(e,i)?e=replaceUrlParamVal(e,i,n[i]):r+=i+"="+n[i]+"&")}),e+=r.replace(/&$/,"")}function getReplaceHref(e){var t=e.match(/(\d+)-(\d+)/i),n=t[1],i=t[2];return"//m.vip.com/product-"+n+"-"+i+".html?m=product&brand_id="+n+"&product_id="+i}function getToSpecialTopicUrl(e){if(""===e||!e)return e;var t=VIP.defaultParam;if(e){var n="width="+t.width+"&height="+t.height+"&client="+t.client+"&source="+t.source+"&warehouse="+t.warehouse+"&area_id="+t.area_id+"&net="+t.net+"&mars_cid="+t.mars_cid+"&is_preload="+t.is_preload+"&newcustomer="+t.newcustomer+"&wap_consumer="+t.wap_consumer+"&app_version="+t.app_version,i=e.indexOf("?");if(e=i>0?e+"&"+n:e+"?"+n,"wap"===t.client){for(var a=["//ap.vip.com/","//mzt.vip.com/","//upload.devcmstopic.com/","//mzt.vip.com/"],r="//ap.vip.com/",o=0;o<a.length;o++){var s=a[o],c=e.indexOf(s);"-1"!==c&&(r=s)}var d=e.indexOf(r),l=e.indexOf("exclusive_subject/te/"),u="//m.vip.com/index.php?m=special&p=",p="";if(d>=0&&l>0){var f=r+"uploadfiles/exclusive_subject",g=f.length;p=e.substr(g);var _=p.indexOf("?");return _>0&&(p=p.substr(0,_)),""!==p&&(e=u+p),e}return e}return e}}function addParamIntoUrl(e,t){return e&&t?e+=(e.indexOf("?")>-1?"&":"?")+t:e}function modelX(e,t){return t=t||{},"string"!=typeof e?"":("undefined"==typeof t.headerUsed&&(t.headerUsed=!0),e.split(/(?=@model-base)/i).map(function(e){var n=e.match(_atRule)||[],i=_getModelInfo(n[1]||t.modelBase,t.rootBase),a={rem:i.ratio,mx:i.ratio/100};return 1===i.ratio&&/from/.test(n[0])||/^\s+$/.test(e)?e:(t.headerUsed?i.rule:"")+e.replace(_atRule,"").replace(_number,function(){return parseFloat(arguments[0])*a[arguments[3]]+"rem"})}).join(""))}function adaption(){var e={},t={};return t.win=$(window),e.psdWidth=640,e.update=function(){try{e.setRootFontSize()}catch(t){}},e.setRootFontSize=function(){var n=t.win.width(),i=320,a=e.psdWidth;i>n&&(n=i),n>a&&(n=a),$("html").css("font-size",100*n/a+"px")},window.addEventListener("resize",e.update,!1),e.update(),e}function notifyTips(e,t){var n=t||1e3,i=$("#J_notify_tips"),a=i.attr("isShowed");i.attr("isShowed","true").show().html(e),a&&window.clearTimeout(window.timer),window.timer=setTimeout(function(){i.removeAttr("isShowed").hide()},n)}function genLocation(e){var t=document.createElement("a");return t.href=e,t}function genImageSrc(e){e=e.replace(/[?&]x_vip_host=[^&#]+/,"");var t=genLocation(e),n="//h2bak.appsimg.com",i="//bak.appsimg.com",a="";return a=window.h2ImgA.indexOf("h2")>-1?t.href.replace(t.protocol+"//"+t.hostname,n).replace(/(!\d*)*.webp/,""):t.href.replace(t.protocol+"//"+t.hostname,i).replace(/(!\d*)*.webp/,""),t.search.length>0?a+"&x_vip_host="+t.hostname:a+"?x_vip_host="+t.hostname}function winHandleImgError(e,t,n){var i="data-lazy-error",a=t.attr("data-"+n.data_attribute);"1"===VIP.getSwitch("is_handle_img_error")&&t.is("img")&&"true"===t.attr(i)&&t.attr("src",genImageSrc(a))}function goLiveRoom(e,t,n){var i,a;if(/^\d+#live@video$/.test(e))i="live_room",a="5.24.5";else if(/^\d+#ilvb@video$/.test(e))i="av_live_room",a="5.26.5";else{if(!/^\d+#vod@video$/.test(e))return console.error("groud_id错误:",e);i="vod_room",a="5.32.5"}var r=navigator.appVersion.indexOf("iPhone OS 7_"),o=VIP.compareVersion(VIP.defaultParam.app_version,a);if(console.log("liveroomType:",i," | needVersion:",a," | compareVersion:",o),r>=0||0===o)VIP.notify_tips("您的APP版本过低不支持直播,请升级后观看~",1500);else{var s={group_id:e,source_tag:t};"live_room"===i&&n&&(s.fullScreen=1),VIP.Loading.show(),require([window.mstRequire.path.hercule],function(){VIP.Loading.hide(),VH.base.showActivity({name:i,params:s})})}}function disableScrollClick(){var e,t=vendor.Mar.Seed,n=function(){t.request("mst","click","prevent_scroll_click","1")},i=function(t){var i=new Date;i-e<100?(t.stopImmediatePropagation(),t.stopPropagation(),n(),Bom.setWindowProp("preventScrollTouch",!0)):Bom.setWindowProp("preventScrollTouch",!1)},a=function(){e=new Date};$("body").on("touchstart",i),$(window).on("scroll",a)}var _global=createCommonjsModule(function(e){var t=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=t)}),_core=createCommonjsModule(function(e){var t=e.exports={version:"2.6.1"};"number"==typeof __e&&(__e=t)}),_isObject=function(e){return"object"==typeof e?null!==e:"function"==typeof e},_anObject=function(e){if(!_isObject(e))throw TypeError(e+" is not an object!");return e},_fails=function(e){try{return!!e()}catch(t){return!0}},_descriptors=!_fails(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),document$1=_global.document,is=_isObject(document$1)&&_isObject(document$1.createElement),_domCreate=function(e){return is?document$1.createElement(e):{}},_ie8DomDefine=!_descriptors&&!_fails(function(){return 7!=Object.defineProperty(_domCreate("div"),"a",{get:function(){return 7}}).a}),_toPrimitive=function(e,t){if(!_isObject(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!_isObject(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!_isObject(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!_isObject(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")},dP=Object.defineProperty,f=_descriptors?Object.defineProperty:function(e,t,n){if(_anObject(e),t=_toPrimitive(t,!0),_anObject(n),_ie8DomDefine)try{return dP(e,t,n)}catch(i){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e},_objectDp={f:f},_propertyDesc=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},_hide=_descriptors?function(e,t,n){return _objectDp.f(e,t,_propertyDesc(1,n))}:function(e,t,n){return e[t]=n,e},hasOwnProperty={}.hasOwnProperty,_has=function(e,t){return hasOwnProperty.call(e,t)},id=0,px=Math.random(),_uid=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++id+px).toString(36))},_redefine=createCommonjsModule(function(e){var t=_uid("src"),n="toString",i=Function[n],a=(""+i).split(n);_core.inspectSource=function(e){return i.call(e)},(e.exports=function(e,n,i,r){var o="function"==typeof i;o&&(_has(i,"name")||_hide(i,"name",n)),e[n]!==i&&(o&&(_has(i,t)||_hide(i,t,e[n]?""+e[n]:a.join(String(n)))),e===_global?e[n]=i:r?e[n]?e[n]=i:_hide(e,n,i):(delete e[n],_hide(e,n,i)))})(Function.prototype,n,function(){return"function"==typeof this&&this[t]||i.call(this)})}),_aFunction=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e},_ctx=function(e,t,n){if(_aFunction(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,i){return e.call(t,n,i)};case 3:return function(n,i,a){return e.call(t,n,i,a)}}return function(){return e.apply(t,arguments)}},PROTOTYPE="prototype",$export=function(e,t,n){var i,a,r,o,s=e&$export.F,c=e&$export.G,d=e&$export.S,l=e&$export.P,u=e&$export.B,p=c?_global:d?_global[t]||(_global[t]={}):(_global[t]||{})[PROTOTYPE],f=c?_core:_core[t]||(_core[t]={}),g=f[PROTOTYPE]||(f[PROTOTYPE]={});c&&(n=t);for(i in n)a=!s&&p&&void 0!==p[i],r=(a?p:n)[i],o=u&&a?_ctx(r,_global):l&&"function"==typeof r?_ctx(Function.call,r):r,p&&_redefine(p,i,r,e&$export.U),f[i]!=r&&_hide(f,i,o),l&&g[i]!=r&&(g[i]=r)};_global.core=_core,$export.F=1,$export.G=2,$export.S=4,$export.P=8,$export.B=16,$export.W=32,$export.U=64,$export.R=128;var _export=$export,toString={}.toString,_cof=function(e){return toString.call(e).slice(8,-1)},_iobject=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==_cof(e)?e.split(""):Object(e)},_defined=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e},_toIobject=function(e){return _iobject(_defined(e))},ceil=Math.ceil,floor=Math.floor,_toInteger=function(e){return isNaN(e=+e)?0:(e>0?floor:ceil)(e)},min=Math.min,_toLength=function(e){return e>0?min(_toInteger(e),9007199254740991):0},max=Math.max,min$1=Math.min,_toAbsoluteIndex=function(e,t){return e=_toInteger(e),e<0?max(e+t,0):min$1(e,t)},_arrayIncludes=function(e){return function(t,n,i){var a,r=_toIobject(t),o=_toLength(r.length),s=_toAbsoluteIndex(i,o);if(e&&n!=n){for(;o>s;)if(a=r[s++],a!=a)return!0}else for(;o>s;s++)if((e||s in r)&&r[s]===n)return e||s||0;return!e&&-1}},_library=!1,_shared=createCommonjsModule(function(e){var t="__core-js_shared__",n=_global[t]||(_global[t]={});(e.exports=function(e,t){return n[e]||(n[e]=void 0!==t?t:{})})("versions",[]).push({version:_core.version,mode:_library?"pure":"global",copyright:"© 2018 Denis Pushkarev (zloirock.ru)"})}),_wks=createCommonjsModule(function(e){var t=_shared("wks"),n=_global.Symbol,i="function"==typeof n,a=e.exports=function(e){return t[e]||(t[e]=i&&n[e]||(i?n:_uid)("Symbol."+e))};a.store=t}),UNSCOPABLES=_wks("unscopables"),ArrayProto=Array.prototype;void 0==ArrayProto[UNSCOPABLES]&&_hide(ArrayProto,UNSCOPABLES,{});var _addToUnscopables=function(e){ArrayProto[UNSCOPABLES][e]=!0},$includes=_arrayIncludes(!0);_export(_export.P,"Array",{includes:function(e){return $includes(this,e,arguments.length>1?arguments[1]:void 0)}}),_addToUnscopables("includes");var _stringAt=function(e){return function(t,n){var i,a,r=String(_defined(t)),o=_toInteger(n),s=r.length;return o<0||o>=s?e?"":void 0:(i=r.charCodeAt(o),i<55296||i>56319||o+1===s||(a=r.charCodeAt(o+1))<56320||a>57343?e?r.charAt(o):i:e?r.slice(o,o+2):(i-55296<<10)+(a-56320)+65536)}},_iterators={},shared=_shared("keys"),_sharedKey=function(e){return shared[e]||(shared[e]=_uid(e))},arrayIndexOf=_arrayIncludes(!1),IE_PROTO$1=_sharedKey("IE_PROTO"),_objectKeysInternal=function(e,t){var n,i=_toIobject(e),a=0,r=[];for(n in i)n!=IE_PROTO$1&&_has(i,n)&&r.push(n);for(;t.length>a;)_has(i,n=t[a++])&&(~arrayIndexOf(r,n)||r.push(n));return r},_enumBugKeys="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),_objectKeys=Object.keys||function(e){return _objectKeysInternal(e,_enumBugKeys)},_objectDps=_descriptors?Object.defineProperties:function(e,t){_anObject(e);for(var n,i=_objectKeys(t),a=i.length,r=0;a>r;)_objectDp.f(e,n=i[r++],t[n]);return e},document$2=_global.document,_html=document$2&&document$2.documentElement,IE_PROTO=_sharedKey("IE_PROTO"),Empty=function(){},PROTOTYPE$1="prototype",createDict=function(){var e,t=_domCreate("iframe"),n=_enumBugKeys.length,i="<",a=">";for(t.style.display="none",_html.appendChild(t),t.src="javascript:",e=t.contentWindow.document,e.open(),e.write(i+"script"+a+"document.F=Object"+i+"/script"+a),e.close(),createDict=e.F;n--;)delete createDict[PROTOTYPE$1][_enumBugKeys[n]];return createDict()},_objectCreate=Object.create||function(e,t){var n;return null!==e?(Empty[PROTOTYPE$1]=_anObject(e),n=new Empty,Empty[PROTOTYPE$1]=null,n[IE_PROTO]=e):n=createDict(),void 0===t?n:_objectDps(n,t)},def=_objectDp.f,TAG=_wks("toStringTag"),_setToStringTag=function(e,t,n){e&&!_has(e=n?e:e.prototype,TAG)&&def(e,TAG,{configurable:!0,value:t})},IteratorPrototype={};_hide(IteratorPrototype,_wks("iterator"),function(){return this});var _iterCreate=function(e,t,n){e.prototype=_objectCreate(IteratorPrototype,{next:_propertyDesc(1,n)}),_setToStringTag(e,t+" Iterator")},_toObject=function(e){return Object(_defined(e))},IE_PROTO$2=_sharedKey("IE_PROTO"),ObjectProto=Object.prototype,_objectGpo=Object.getPrototypeOf||function(e){return e=_toObject(e),_has(e,IE_PROTO$2)?e[IE_PROTO$2]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?ObjectProto:null},ITERATOR=_wks("iterator"),BUGGY=!([].keys&&"next"in[].keys()),FF_ITERATOR="@@iterator",KEYS="keys",VALUES="values",returnThis=function(){return this},_iterDefine=function(e,t,n,i,a,r,o){_iterCreate(n,t,i);var s,c,d,l=function(e){if(!BUGGY&&e in g)return g[e];switch(e){case KEYS:return function(){return new n(this,e)};case VALUES:return function(){return new n(this,e)}}return function(){return new n(this,e)}},u=t+" Iterator",p=a==VALUES,f=!1,g=e.prototype,_=g[ITERATOR]||g[FF_ITERATOR]||a&&g[a],m=_||l(a),h=a?p?l("entries"):m:void 0,v="Array"==t?g.entries||_:_;if(v&&(d=_objectGpo(v.call(new e)),d!==Object.prototype&&d.next&&(_setToStringTag(d,u,!0),_library||"function"==typeof d[ITERATOR]||_hide(d,ITERATOR,returnThis))),p&&_&&_.name!==VALUES&&(f=!0,m=function(){return _.call(this)}),_library&&!o||!BUGGY&&!f&&g[ITERATOR]||_hide(g,ITERATOR,m),_iterators[t]=m,_iterators[u]=returnThis,a)if(s={values:p?m:l(VALUES),keys:r?m:l(KEYS),entries:h},o)for(c in s)c in g||_redefine(g,c,s[c]);else _export(_export.P+_export.F*(BUGGY||f),t,s);return s},$at=_stringAt(!0);_iterDefine(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=$at(t,n),this._i+=e.length,{value:e,done:!1})});var _iterCall=function(e,t,n,i){try{return i?t(_anObject(n)[0],n[1]):t(n)}catch(a){var r=e["return"];throw void 0!==r&&_anObject(r.call(e)),a}},ITERATOR$1=_wks("iterator"),ArrayProto$1=Array.prototype,_isArrayIter=function(e){return void 0!==e&&(_iterators.Array===e||ArrayProto$1[ITERATOR$1]===e)},_createProperty=function(e,t,n){t in e?_objectDp.f(e,t,_propertyDesc(0,n)):e[t]=n},TAG$1=_wks("toStringTag"),ARG="Arguments"==_cof(function(){return arguments}()),tryGet=function(e,t){try{return e[t]}catch(n){}},_classof=function(e){var t,n,i;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=tryGet(t=Object(e),TAG$1))?n:ARG?_cof(t):"Object"==(i=_cof(t))&&"function"==typeof t.callee?"Arguments":i},ITERATOR$2=_wks("iterator"),core_getIteratorMethod=_core.getIteratorMethod=function(e){if(void 0!=e)return e[ITERATOR$2]||e["@@iterator"]||_iterators[_classof(e)]},ITERATOR$3=_wks("iterator"),SAFE_CLOSING=!1;try{var riter=[7][ITERATOR$3]();riter["return"]=function(){SAFE_CLOSING=!0}}catch(e){}var _iterDetect=function(e,t){if(!t&&!SAFE_CLOSING)return!1;var n=!1;try{var i=[7],a=i[ITERATOR$3]();a.next=function(){return{done:n=!0}},i[ITERATOR$3]=function(){return a},e(i)}catch(r){}return n};_export(_export.S+_export.F*!_iterDetect(function(e){}),"Array",{from:function(e){var t,n,i,a,r=_toObject(e),o="function"==typeof this?this:Array,s=arguments.length,c=s>1?arguments[1]:void 0,d=void 0!==c,l=0,u=core_getIteratorMethod(r);if(d&&(c=_ctx(c,s>2?arguments[2]:void 0,2)),void 0==u||o==Array&&_isArrayIter(u))for(t=_toLength(r.length),n=new o(t);t>l;l++)_createProperty(n,l,d?c(r[l],l):r[l]);else for(a=u.call(r),n=new o;!(i=a.next()).done;l++)_createProperty(n,l,d?_iterCall(a,c,[i.value,l],!0):i.value);return n.length=l,n}});var _isArray=Array.isArray||function(e){return"Array"==_cof(e)},SPECIES=_wks("species"),_arraySpeciesConstructor=function(e){var t;return _isArray(e)&&(t=e.constructor,"function"!=typeof t||t!==Array&&!_isArray(t.prototype)||(t=void 0),_isObject(t)&&(t=t[SPECIES],null===t&&(t=void 0))),void 0===t?Array:t},_arraySpeciesCreate=function(e,t){return new(_arraySpeciesConstructor(e))(t)},_arrayMethods=function(e,t){var n=1==e,i=2==e,a=3==e,r=4==e,o=6==e,s=5==e||o,c=t||_arraySpeciesCreate;return function(t,d,l){for(var u,p,f=_toObject(t),g=_iobject(f),_=_ctx(d,l,3),m=_toLength(g.length),h=0,v=n?c(t,m):i?c(t,0):void 0;m>h;h++)if((s||h in g)&&(u=g[h],p=_(u,h,f),e))if(n)v[h]=p;else if(p)switch(e){case 3:return!0;case 5:return u;case 6:return h;case 2:v.push(u)}else if(r)return!1;return o?-1:a||r?r:v}},$find=_arrayMethods(5),KEY="find",forced=!0;KEY in[]&&Array(1)[KEY](function(){forced=!1}),_export(_export.P+_export.F*forced,"Array",{find:function(e){return $find(this,e,arguments.length>1?arguments[1]:void 0)}}),_addToUnscopables(KEY);var $find$1=_arrayMethods(6),KEY$1="findIndex",forced$1=!0;KEY$1 in[]&&Array(1)[KEY$1](function(){forced$1=!1}),_export(_export.P+_export.F*forced$1,"Array",{findIndex:function(e){return $find$1(this,e,arguments.length>1?arguments[1]:void 0)}}),_addToUnscopables(KEY$1);var f$1=Object.getOwnPropertySymbols,_objectGops={f:f$1},f$2={}.propertyIsEnumerable,_objectPie={f:f$2},$assign=Object.assign,_objectAssign=!$assign||_fails(function(){var e={},t={},n=Symbol(),i="abcdefghijklmnopqrst";return e[n]=7,i.split("").forEach(function(e){t[e]=e}),7!=$assign({},e)[n]||Object.keys($assign({},t)).join("")!=i})?function(e,t){for(var n=_toObject(e),i=arguments.length,a=1,r=_objectGops.f,o=_objectPie.f;i>a;)for(var s,c=_iobject(arguments[a++]),d=r?_objectKeys(c).concat(r(c)):_objectKeys(c),l=d.length,u=0;l>u;)o.call(c,s=d[u++])&&(n[s]=c[s]);return n}:$assign;_export(_export.S+_export.F,"Object",{assign:_objectAssign});var MATCH=_wks("match"),_isRegexp=function(e){var t;return _isObject(e)&&(void 0!==(t=e[MATCH])?!!t:"RegExp"==_cof(e))},_stringContext=function(e,t,n){if(_isRegexp(t))throw TypeError("String#"+n+" doesn't accept regex!");return String(_defined(e))},MATCH$1=_wks("match"),_failsIsRegexp=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[MATCH$1]=!1,!"/./"[e](t)}catch(i){}}return!0},INCLUDES="includes";_export(_export.P+_export.F*_failsIsRegexp(INCLUDES),"String",{includes:function(e){return!!~_stringContext(this,e,INCLUDES).indexOf(e,arguments.length>1?arguments[1]:void 0)}});var STARTS_WITH="startsWith",$startsWith=""[STARTS_WITH];_export(_export.P+_export.F*_failsIsRegexp(STARTS_WITH),"String",{startsWith:function(e){var t=_stringContext(this,e,STARTS_WITH),n=_toLength(Math.min(arguments.length>1?arguments[1]:void 0,t.length)),i=String(e);return $startsWith?$startsWith.call(t,i,n):t.slice(n,n+i.length)===i}});var ENDS_WITH="endsWith",$endsWith=""[ENDS_WITH];_export(_export.P+_export.F*_failsIsRegexp(ENDS_WITH),"String",{endsWith:function(e){var t=_stringContext(this,e,ENDS_WITH),n=arguments.length>1?arguments[1]:void 0,i=_toLength(t.length),a=void 0===n?i:Math.min(_toLength(n),i),r=String(e);return $endsWith?$endsWith.call(t,r,a):t.slice(a-r.length,a)===r}});var _stringRepeat=function(e){var t=String(_defined(this)),n="",i=_toInteger(e);if(i<0||i==1/0)throw RangeError("Count can't be negative");for(;i>0;(i>>>=1)&&(t+=t))1&i&&(n+=t);return n},_stringPad=function(e,t,n,i){var a=String(_defined(e)),r=a.length,o=void 0===n?" ":String(n),s=_toLength(t);if(s<=r||""==o)return a;var c=s-r,d=_stringRepeat.call(o,Math.ceil(c/o.length));return d.length>c&&(d=d.slice(0,c)),i?d+a:a+d},navigator$1=_global.navigator,_userAgent=navigator$1&&navigator$1.userAgent||"";_export(_export.P+_export.F*/Version\/10\.\d+(\.\d+)? Safari\//.test(_userAgent),"String",{padStart:function(e){return _stringPad(this,e,arguments.length>1?arguments[1]:void 0,!0)}}),_export(_export.P+_export.F*/Version\/10\.\d+(\.\d+)? Safari\//.test(_userAgent),"String",{padEnd:function(e){return _stringPad(this,e,arguments.length>1?arguments[1]:void 0,!1)}});var LOGIN_STATUS={LOGIN:1,UN_LOGIN:0},COSTOMER_TYPE_BY_REG_TIME={NEW_CUSTOMER:"1",REGULAR_CUSTOMER:"2"},RENDER_GRADE={PRIOR:1,DEMAND:3},SALE_STATUS={ON_SALE:"on_sale",PRESELL:"pre"},LITEAPPCLIENT={OLD_NAME:"liteapp",LITEAPP:"wechat_mini_program"},QUICKAPPCLIENT={QUICKAPP:"shop_quick_app"},BAIDUSMALLCLIENT={BAIDUSMALL:"shop_baidu_small"},HOST={MST:"mst.vip.com",STATIC:"mst.vipstatic.com",IMG_A:"a.appsimg.com",H2_STATIC:"h2.vipstatic.com/mst.vipstatic.com",H2_IMG_A:"h2.appsimg.com/a.appsimg.com"},_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},asyncGenerator=function(){function e(e){this.value=e}function t(t){function n(e,t){return new Promise(function(n,a){var s={key:e,arg:t,resolve:n,reject:a,next:null};o?o=o.next=s:(r=o=s,i(e,t))})}function i(n,r){try{var o=t[n](r),s=o.value;s instanceof e?Promise.resolve(s.value).then(function(e){i("next",e)},function(e){i("throw",e)}):a(o.done?"return":"normal",o.value)}catch(c){a("throw",c)}}function a(e,t){switch(e){case"return":r.resolve({value:t,done:!0});break;case"throw":r.reject(t);break;default:r.resolve({value:t,done:!1})}r=r.next,r?i(r.key,r.arg):o=null}var r,o;this._invoke=n,"function"!=typeof t["return"]&&(this["return"]=void 0)}return"function"==typeof Symbol&&Symbol.asyncIterator&&(t.prototype[Symbol.asyncIterator]=function(){return this}),t.prototype.next=function(e){return this._invoke("next",e)},t.prototype["throw"]=function(e){return this._invoke("throw",e)},t.prototype["return"]=function(e){return this._invoke("return",e)},{wrap:function(e){return function(){return new t(e.apply(this,arguments))}},await:function(t){return new e(t)}}}(),classCallCheck=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Util=Object.freeze({cookie:cookie,stringToDate:stringToDate,loadScript:loadScript,sliceArr:sliceArr,getQueryStringByUrl:getQueryStringByUrl,getQueryString:getQueryString,checkUrlContainParam:checkUrlContainParam,replaceUrlParamVal:replaceUrlParamVal,compareVersion:compareVersion,fixImg:fixImg,safeGet:safeGet,throttle:throttle,debounce:debounce,curry:curry,getSpecialUrlById:getSpecialUrlById,isImg:isImg,getRouterClient:getRouterClient,parserUrlParam:parserUrlParam,fixClient:fixClient,addParamToUrl:addParamToUrl,stopScrollByAndroid:stopScrollByAndroid,notFrontGetAreaId:notFrontGetAreaId,getFdcAreaId:getFdcAreaId,maskVersionB:maskVersionB}),getSwitch=curry(getConfigValueByKey,["extend","switch"]),Url=Object.freeze({getIdByUrl:getIdByUrl,handleUrlParam:handleUrlParam,getReplaceHref:getReplaceHref,getToSpecialTopicUrl:getToSpecialTopicUrl,addParamIntoUrl:addParamIntoUrl}),_atRule=/@model-base\s*((\d+\/)?\d+)\s*(from\s*(\d+\/)?\d+\s*)?;/i,_number=/[+-]?([0-9]*\.?[0-9]+|[0-9]+\.?[0-9]*)([eE][+-]?[0-9]+)?(rem|mx)/gi,_rootBaseDefault="75/750",_modelBaseDefault="100/640",_baseCheck=function(e){switch(!0){case/^(\d+\/)?0$/.test(e):return null;case/^\d+\/\d+$/.test(e):return e;case/^\d+$/.test(e):return"100/"+e}return null},_getModelInfo=function(e,t){e=_baseCheck(e)||_modelBaseDefault,t=_baseCheck(t)||_rootBaseDefault;var n=e.split("/")[0]/e.split("/")[1]/(t.split("/")[0]/t.split("/")[1]);return{rule:"@model-base "+t+" from "+e+";",ratio:n}},Rem={adaption:function(){function e(){var e=r.getBoundingClientRect().width;e/c>632&&(e=632*c);var t=e/10;r.style.fontSize=t+"px",l.rem=n.rem=t}var t,n=window,i=window.mst_lib||(window.mst_lib={}),a=n.document,r=a.documentElement,o=a.querySelector('meta[name="viewport"]'),s=a.querySelector('meta[name="flexible"]'),c=0,d=0,l=i.flexible||(i.flexible={});if(o){console.warn("将根据已有的meta标签来设置缩放比例");var u=o.getAttribute("content").match(/initial-scale=([\d.]+)/);u&&(d=parseFloat(u[1]),c=parseInt(1/d))}else if(s){var p=s.getAttribute("content");if(p){var f=p.match(/initial-dpr=([\d.]+)/),g=p.match(/maximum-dpr=([\d.]+)/);f&&(c=parseFloat(f[1]),d=parseFloat((1/c).toFixed(2))),g&&(c=parseFloat(g[1]),
d=parseFloat((1/c).toFixed(2)))}}if(!c&&!d){var _=n.navigator.appVersion.match(/iphone/gi),m=n.devicePixelRatio;c=_?m>=3&&(!c||c>=3)?3:m>=2&&(!c||c>=2)?2:1:1,d=1/c}if(r.setAttribute("data-dpr",c),!o)if(o=a.createElement("meta"),o.setAttribute("name","viewport"),o.setAttribute("content","initial-scale="+d+", maximum-scale="+d+", minimum-scale="+d+", user-scalable=no"),r.firstElementChild)r.firstElementChild.appendChild(o);else{var h=a.createElement("div");h.appendChild(o),a.write(h.innerHTML)}n.addEventListener("resize",function(){clearTimeout(t),t=setTimeout(e,300)},!1),n.addEventListener("pageshow",function(n){n.persisted&&(clearTimeout(t),t=setTimeout(e,300))},!1),"complete"===a.readyState?a.body.style.fontSize=12*c+"px":a.addEventListener("DOMContentLoaded",function(e){a.body.style.fontSize=12*c+"px"},!1),e(),l.dpr=n.dpr=c,l.refreshRem=e,l.rem2px=function(e){var t=parseFloat(e)*this.rem;return"string"==typeof e&&e.match(/rem$/)&&(t+="px"),t},l.px2rem=function(e){var t=parseFloat(e)/this.rem;return"string"==typeof e&&e.match(/px$/)&&(t+="rem"),t}},fixViewPort:function(){var e=VIP.getQueryString("ipadWidth")||"device-width",t=$("meta[name=viewport]"),n=!!t.length;n||(t=$('<meta name="viewport">'));var i={width:e,"initial-scale":"1.0","minimum-scale":"1.0","maximum-scale":"1.0","user-scalable":"no"},a=Object.keys(i).map(function(e){return e+"="+i[e]}).join(", ");t.attr("content",a),n||t.appendTo("head"),"function"==typeof window._set_font_size_750&&window._set_font_size_750()},init:function(){this.fixViewPort(),this.adaption()}},wrapSelector="#specialContent",dialog=function(){function e(){$(".mst-dialog").animate({opacity:0},100,function(){$(this).remove()})}function t(t){i||(i=!0,$.template(a,n),t.on("click",".mst-dialog .mask",function(){e()}))}var n='<div class="mst-dialog ${Extendclass}">   <div class="mask"></div>   <div class="mst-dialog-content">   <div class="mst-dialog-head">${title}</div>   <div class="mst-dialog-body">{{html ctn}}</div>   <div class="mst-dialog-btns">  {{if hasCancleBtn}}<div class="mst-dialog-btn-cancle">{{if btnCancleText}}${btnCancleText}{{else}}取消{{/if}}</div>  {{/if}}  <div class="mst-dialog-btn-ok">{{if btnOKText}}${btnOKText}{{else}}确定{{/if}}</div>  </div>  </div>  </div>',i=!1,a="VIP-MST-GLOBAL-DIALOG";return function(n){var r=$(wrapSelector);i||t(r);var o=$.tmpl(a,n);n.hideDialog=e,r.append(o),r.on("click",".mst-dialog-btn-ok",function(){n.btnOKCallback?n.btnOKCallback():e()}),r.on("click",".mst-dialog-btn-cancle",function(){n.btnCancleCallback?n.btnCancleCallback():e()}),o.fadeIn(300).show()}}(),floatLayer=function(){var e=!1,t="VIP-MST-GLOBAL-FLOAT-LAYER",n=function(){if(!e){e=!0;var n=$(wrapSelector),i='<div class="mst-layer">     <div class="mst-layer-content">     <div class="mst-layer-title u-border-b">${title}</div>     <div class="mst-layer-body">{{html ctn}}</div>     <div class="mst-layer-footer">    <button class="mst-layer-btn mst-layer-btn-cancel">关闭</button>    </div>     </div>     </div>';$.template(t,i),n.on("click",".mst-layer .mst-layer-btn-cancel",function(){$(".mst-layer").animate({opacity:0},100,function(){$(this).remove()})})}};return function(i){e||n();var a=$.tmpl(t,i),r=$(wrapSelector);r.append(a),a.fadeIn(300).show()}}(),Loading=function(){var e='<div class="mst-global-loading" id="J-mst-global-loading">  <div class="mst-gl-mask"></div>  <div class="mst-gl-body">  <svg class="mst-loading-svg" viewBox="0 0 150 150"> <g class="circle"> <circle cx="75" cy="75" r="72"></circle> <circle cx="75" cy="75" r="72" class="rotation"></circle> </g> <g class="logo-idle"> <path d="M32 62 L47 100 L62 62 M77 49 A0.1 0.1, 0 1 1, 80 52 A0.1 0.1, 0 1 1, 77 49 Z M78 62 L78 100 M95 113 L95 62 L95 85 A15 15, 0 1 1, 130 78 A15 15, 0 1 1, 95 85 Z"></path> </g> </svg> </div>  </div>';return $("body").append(e),{dom:$("#J-mst-global-loading"),show:function(){this.dom.fadeIn(200)},hide:function(){this.dom.fadeOut(200)}}}();window.winHandleImgError=winHandleImgError;var assertion={isEmptyString:function(e){return""===e},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isBoolean:function(e){return"boolean"==typeof value},isObjectButArray:function(e){return e&&"object"===("undefined"==typeof e?"undefined":_typeof(e))&&!Array.isArray(e)},isStringInteger:function(e){return"string"==typeof e&&/^\d+$/.test(e)},isStringNumber:function(e){return"string"==typeof e&&!isNaN(e)},isStringFloat:function(e){return"string"==typeof e&&/^\d*\.\d+$/.test(e)},isStringFakeBoolean:function(e){return"string"==typeof e&&["1","0","false","true"].indexOf(e)>=0},isNumberFakeBoolean:function(e){return"number"==typeof e&&[1,0].indexOf(e)>=0}},Bom=function(){function e(){classCallCheck(this,e)}return createClass(e,null,[{key:"getWindowProp",value:function(e){return window[e]}},{key:"setWindowProp",value:function(e,t){window[e]=t}},{key:"window",get:function(){return window}},{key:"navigator",get:function(){return window.navigator}},{key:"location",get:function(){return window.location}},{key:"document",get:function(){return window.document}},{key:"histroy",get:function(){return window.histroy}},{key:"screen",get:function(){return window.screen}},{key:"cookie",get:function(){return window.document.cookie}}]),e}(),VIPConfig={getObject:function(e){return this.get(e,Object)},getArray:function(e){return this.get(e,Array)},getString:function(e){return this.get(e,String)},getNumber:function(e){return this.get(e,Number)},getStringInteger:function(e){return this.get(e,String,assertion.isStringInteger)},getStringNumber:function(e){return this.get(e,String,assertion.isStringNumber)},getStringFloat:function(e){return this.get(e,String,assertion.isStringFloat)},getStringFakeBoolean:function(e){return this.get(e,String,assertion.isStringFakeBoolean)},getNumberFakeBoolean:function(e){return this.get(e,Number,assertion.isNumberFakeBoolean)},get:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return safeGet.apply(void 0,[Bom.getWindowProp("config")].concat(t))}},win=window,Collection={getCollectionList:function(e,t){var n=this,i=null;i="string"==typeof e?{page_id:e,mars_cid:VIP.defaultParam.mars_cid}:e,$.ajax({url:win.mstHost+"/Special/getFavouriteServiceList",data:i,dataType:"jsonp",success:function(e){if("function"==typeof t)return void t(e);var i=e.data;e.result&&$.each(i,function(e,t){n.setCollectionHtml(t.brand_id,t.brand_store_sn,"add")})}})},setCollection:function(e,t,n,i){window.event&&window.event.preventDefault();var a=this,r=VIP.defaultParam.client,o="wap"===r?2:3;$.ajax({url:win.mstHost+"/Special/favouriteService?",data:{act:e,client:VIP.defaultParam.client,brand_sn:n,brand_id:t,source:o,mars_cid:VIP.defaultParam.mars_cid},dataType:"jsonp",success:function(t){var n,r,o=t.data,s=parseInt(t.code,10);if(i)i(t);else if(t.result)1===s?(n=o.pms_msg?o.pms_msg:"add"===o.type?"取消收藏成功！":"收藏成功！",r="add"===o.type?VIP.Mars.get("blike|"+o.brand_id):VIP.Mars.get("cblike|"+o.brand_id),Mar.Seed.request("mst","click","mst_brand_click",JSON.stringify(r))):n="收藏失败!请稍后再试。",VIP.notify_tips(n,2e3),a.setCollectionHtml(o.brand_id,o.brand_sn,e);else{if(99===s&&""!==o._redirect)return VIP.Login.go(),!1;n="add"===o.type?"取消":"",VIP.notify_tips(n+"收藏失败！请稍后再试。",2e3)}}})},setCollectionHtml:function(e,t,n){var i=$("[data-favorite-status-brand-ids="+e+"]");"add"===n?(i.attr("data-favorite-status-brand-action-type","cancel"),i.find("span").addClass("off")):"cancel"===n&&(i.attr("data-favorite-status-brand-action-type","add"),i.find("span").removeClass("off"))},getCouponStatus:function(e){$.ajax({url:win.mstHost+"/Special/getCouponNum",data:{brand_ids:e,mars_cid:VIP.defaultParam.mars_cid,wap_consumer:VIP.defaultParam.wap_consumer},dataType:"jsonp",success:function(e){$.each(e.data,function(e,t){$("#L_coupon_"+t).show()})}})},getCouponInfo:function(e,t){$.ajax({url:win.mstHost+"/Special/getCouponInfo",data:e,dataType:"jsonp",success:function(e){t?t(e):e.result&&$.each(e.data,function(e,t){2===parseInt(t.coupon_type,10)&&$("#L_coupon_"+t.brand_id).show().html("<em></em>"+t.coupon_fav)})}})}},win$1=window,_e={};_e.SPECIAL="//msp.appvipshop.com/uploadfiles/exclusive_subject/te/v1/s{sid}_{wh}_index.php?wapid=mzt_{sid}&wh={VIP_WH}&title=唯品会",_e.SPECIAL_BLANK="//msp.appvipshop.com/uploadfiles/exclusive_subject/te/v1/s{sid}_{wh}_index.php?wapid=mzt_{sid}&wh={VIP_WH}&m=webview&title=唯品会",_e.PRODUCT="vipshop://showGoodsDetail?brandId={brand}&goodsId={product}&goodsType=0&goodsTitle={title}&w={VIP_WH}",_e.BRAND="vipshop://showBrandProducts?brandId={brand}&brandName={title}",_e.go=function(e,t,n,i,a){function r(e){var t=e.match(/.+(\/vis\/pages(\/x\/(\d{1,2})\/(\d{1,2})){0,1}\/(\d+)\/([1|2])\.html)(.*)/);return!!(t&&t.length>1)&&t[1]}function o(e,t,n){function i(e,t){return e.split(".")[0]>=6||e.split(".")[0]>=5&&e.split(".")[1]>=t}function a(e){return e.split(".")[0]+"."+e.split(".")[1]}var r=VIP.defaultParam,o=/micromessenger/i.test(navigator.userAgent),e=e,t=t,n=n,s="//m.vip.com/classify-category-"+e+"-"+t+"-0-0-0-0-20.html",c="vipshop://categoryGoodsList?parentCategoryId="+e+"&categoryId="+t+"&categoryName="+encodeURIComponent(n);if(o)VIP.notify_tips("微信网页版暂不支持查看分类，请下载手机app端查看体验更佳哦",3e3);else if("wap"==r.client)window.location.href=s;else if("undefined"!=typeof r.app_version)if("ipad"==r.client)VIP.notify_tips("本分类商品暂只支持在手机app端查看，请到手机端下载唯品会查看",3e3);else{var d=r.app_version;0==r.app_version.indexOf("8.")?(d=d.substring(2),i(a(d),14)?window.location.href=c:VIP.notify_tips("您当前app版本暂不支持查看本分类商品，建议升级app版本或到搜索->分类中查找",3e3)):i(a(d),14)?window.location.href=c:VIP.notify_tips("您当前app版本暂不支持查看本分类商品，建议升级app版本或到搜索->分类中查找",3e3)}}var s,c,d=VIP.defaultParam,l=(/micromessenger/i.test(navigator.userAgent),/iphone|ipod/i.test(navigator.userAgent)),u=/ipad/i.test(navigator.userAgent);/android/i.test(navigator.userAgent);i=encodeURIComponent(i),_e.VIS=VIP.getToSpecialTopicUrl(t+"&m=webview&title={title}"),s=r(_e.VIS),a&&"0"!==a.pre_type&&(_e.BRAND="vipshop://showBrandProducts?brandId={brand}&brandName={title}&top_type=1&mtms_component_id="+(a.mtms_component_id||"")+"&mtms_id="+(window.config.data.build_id||"")),"wap"==d.client&&(_e.SPECIAL=_e.SPECIAL.replace("msp.appvipshop.com","mzt.vip.com"),_e.SPECIAL_BLANK=_e.SPECIAL_BLANK.replace("msp.appvipshop.com","mzt.vip.com"),_e.PRODUCT="//m.vip.com/product-{brand}-{product}.html?m=product&brand_id={brand}&product_id={product}&title={title}",_e.BRAND="//m.vip.com/brand-{brand}-0-0-0-1-0-1-40.html?m=brand&brand_id={brand}&title={title}",_e.VIS=s?"//m.vip.com/index.php?m=special&p="+s+"&h=mzt.vip.com&_src=vis&title={title}":_e.VIS);var p="all",f=t;t&&"object"===("undefined"==typeof t?"undefined":_typeof(t))&&(p=d.warehouse||"nh",f=t[p]);var g=null,_=null;t&&"string"==typeof t&&t.indexOf("|")>=0&&null!=typeof t&&(g=t,_=t);var m=function(){var e=VIP.defaultParam,t=/micromessenger/i.test(navigator.userAgent),n=n,i="vipshop://showChannel?f=dx&channelID={channelID}&channelMenu={channelMenu}",a="vipshop://showChannel?channelID={channelID}&channelMenu={channelMenu}",r=function(e,t){return e=8==e.split(".")[0]?e.split(".")[1]+"."+e.split(".")[2]:e.split(".")[0]+"."+e.split(".")[1],e.split(".")[0]>=5&&e.split(".")[1]>=t},o=function(n,r,o){if(t)VIP.notify_tips("微信网页版暂不支持查看分类，请下载手机app端查看体验更佳哦",3e3);else if("wap"==e.client)VIP.notify_tips("网页版暂不支持查看分类频道，请下载手机app端查看体验更佳哦",3e3);else if("undefined"!=typeof e.app_version){var s=e.app_version;switch(e.client){case"android":this.checkAppVersion(s,7)?" "!=n&&" "!=o&&(i=i.replace(/{channelID}/g,n).replace(/{channelMenu}/g,o),window.location.href=i):VIP.notify_tips("您当前app版本暂不支持查看本分类频道，建议升级app新版本体验",3e3);break;case"iphone":this.checkAppVersion(s,15)?" "!=r&&" "!=o&&(a=a.replace(/{channelID}/g,r).replace(/{channelMenu}/g,o),window.location.href=a):VIP.notify_tips("您当前app版本暂不支持查看本分类频道，建议升级app新版本体验",3e3);break;case"ipad":VIP.notify_tips("ipad版唯品会暂不支持查看该分类频道",3e3);break;default:VIP.notify_tips("本分类商品暂只支持在手机app端查看，请到手机端下载唯品会查看",3e3)}}else VIP.notify_tips("您当前app版本暂不支持查看本分类频道，建议升级app新版本体验",3e3)};return{checkAppVersion:r,init:o}}();switch(e){case"special":f="_blank"==n?_e.SPECIAL_BLANK.replace(/{sid}/g,f).replace(/{wh}/g,p).replace(/{VIP_WH}/g,"VIP_"+p.toUpperCase()):_e.SPECIAL.replace(/{sid}/g,f).replace(/{wh}/g,p).replace(/{VIP_WH}/g,"VIP_"+p.toUpperCase());try{win$1.goToSpecialTopicUrl(f)}catch(h){console.log("%c没有goToSpecialTopicUrl,请线上预览","color:blue",f)}break;case"special-auto":f=parseInt(f),_e.go("special",{nh:f,sh:f+1,cd:f+2,bj:f+3,hz:f+4},n);break;case"special-auto-ran":f=f.match(/(\d+).*(nh|sh|cd|bj|hz)/);var v=5,y=v-{nh:0,sh:1,cd:2,bj:3,hz:4}[f[2]];f=parseInt(f[1]),_e.go("special",{nh:f+(y+0)%v,sh:f+(y+1)%v,cd:f+(y+2)%v,bj:f+(y+3)%v,hz:f+(y+4)%v},n);break;case"brand":location.href=_e.BRAND.replace(/{brand}/g,f).replace(/{title}/g,i);break;case"product":var w=f.match(/(\d*)-(\d*)/)[1],b=f.match(/(\d*)-(\d*)/)[2];location.href=_e.PRODUCT.replace(/{brand}/g,w).replace(/{product}/g,b).replace(/{title}/g,i).replace(/{VIP_WH}/g,"VIP_"+p.toUpperCase());break;case"vis":var c=_e.VIS;"string"!=typeof f||/mst.vip.com/.test(c)||(c=_e.VIS.replace(/{brand}/g,t.match(/brand_id=(\d*)/)[1])),location.href=c.replace(/{title}/g,i);break;case"app-category":void 0!=_typeof(g.split("|")[0])&&void 0!=_typeof(g.split("|")[1])&&o(g.split("|")[0],g.split("|")[1],g.split("|")[2]);break;case"index":c="wap"!=d.client?u?"vipshop://showMenuItem?typeID=0&typeValue=0":l&&!VIP.compareVersion(d.app_version,"5.1")?"vipshop://showMenuItem?typeID=0&typeValue=0":"http://m.vip.com?m=home":"http://m.vip.com",location.href=c;break;case"subchannel":void 0!=_typeof(_.split("|")[0])&&void 0!=_typeof(_.split("|")[1])&&void 0!=_typeof(_.split("|")[2])&&m.init(_.split("|")[0],_.split("|")[1],_.split("|")[2]);break;case"makeup":_e.go("special",$(window).width()<1024?3561:3562);break;case"kids":_e.go("special",$(window).width()<1024?3563:3564);break;case"home":_e.go("special",$(window).width()<1024?3565:3566)}};var goLiveRoomWithLiveState=function(e,t,n){var i,a="https://zhibo-api.vip.com/room/"+e.type+"/"+e.id+"?wap_id=zhibo_"+e.type+"_"+e.id;if(console.log("roomLink",a),VIP.defaultParam.is_app){if("ilvb"===e.type){var r=VIP.compareVersion(VIP.defaultParam.app_version,"6.17");0===r&&(i=i||a)}}else i=i||a;i?(console.log("mst redirect to liveroom link"),VIP.router(null,"url",i)):goLiveRoom(e.group_id,t,n)},win$2=window,Favorite={getFavedList:function(e,t){var n={channel:VIP.defaultParam.is_app?"app":"wap",mobile_platform:VIP.defaultParam.is_app?3:2,mobile_channel:VIP.getQueryString("mobile_channel"),user_token:VIP.getQueryString("user_token"),warehouse:VIP.defaultParam.warehouse||window.config.data.page_data.warehouse||"VIP_NH",app_version:VIP.defaultParam.app_version,sale_platform:VIP.getQueryString("sale_platform"),mars_cid:VIP.defaultParam.mars_cid};if($.extend(n,e),0===VIP.getConfigValueByKey("extend","user_login")){var i={code:0,msg:"false",data:[],result:!1};return void(t&&t(i))}n.page_id&&$.ajax({url:win$2.mstHost+"/Special/getFavouriteServiceList",data:n,dataType:"jsonp",success:function(e){t&&t(e)}})},getFavedListNew:function(e,t){var n={source:VIP.defaultParam.is_app?3:2,warehouse:VIP.defaultParam.warehouse,format:1,mars_cid:VIP.defaultParam.mars_cid};return $.extend(n,e),n.page_id&&n.page_id?$.ajax({url:win$2.mstHost+"/brand/checkBrandSubscribe",data:n,dataType:"jsonp",success:function(e){t&&t(e)}}):void console.log('接口："/brand/checkBrandSubscribe"，必要参数page_id 或 brand_ids 为空')},doFavCoupon:function(e,t){var n={source:VIP.defaultParam.is_app?3:2,client:VIP.defaultParam.client,channel:VIP.defaultParam.is_app?"app":"wap",mobile_platform:VIP.defaultParam.is_app?3:2,mobile_channel:VIP.getQueryString("mobile_channel"),user_token:VIP.getQueryString("user_token"),warehouse:VIP.defaultParam.warehouse||window.config.data.page_data.warehouse||"VIP_NH",app_version:VIP.defaultParam.app_version,sale_platform:VIP.getQueryString("sale_platform"),mars_cid:VIP.defaultParam.mars_cid};$.extend(n,e),n.act&&n.brand_sn&&n.brand_id&&$.ajax({url:win$2.mstHost+"/Special/favouriteServiceNew",data:n,dataType:"jsonp",showLoading:!0,success:function(e){t&&t(e)}})},getFavBtn:function(e,t){return e.dom.find("."+e.favClass+"["+e.attrPre+"-fav-id="+t+"]")},doFav:function(e,t){var n={source:VIP.defaultParam.is_app?3:2,client:VIP.defaultParam.client,channel:VIP.defaultParam.is_app?"app":"wap",mobile_platform:VIP.defaultParam.is_app?3:2,mobile_channel:VIP.getQueryString("mobile_channel"),user_token:VIP.getQueryString("user_token"),warehouse:VIP.defaultParam.warehouse||window.config.data.page_data.warehouse||"VIP_NH",app_version:VIP.defaultParam.app_version,sale_platform:VIP.getQueryString("sale_platform"),mars_cid:VIP.defaultParam.mars_cid};$.extend(n,e),n.act&&n.brand_sn&&n.brand_id&&$.ajax({url:win$2.mstHost+"/Brand/changeFavState",data:n,dataType:"jsonp",showLoading:!0,success:function(e){t&&t(e)}})},render:function(e,t,n){var i=VIP.Favorite.getFavBtn(e,t);"add"===n?i.attr(e.attrPre+"-fav-type","cancel").addClass(e.favClass+"-off"):"cancel"===n&&i.attr(e.attrPre+"-fav-type","add").removeClass(e.favClass+"-off")},handleDoFav:function(e,t,n){var i=e.data?e.data[n]||e.data:e.data,a="",r="",o={},s=i.pms_data,c=VIP.Favorite.getFavBtn(t,n),d=c.attr(t.attrPre+"-fav-type"),l=parseInt(c.attr(t.attrPre+"-fav-coupon"));if(e.result)e.code?("cancel"===i.type?(a="收藏成功！",l&&(r=VIP.Coupon.handleDoCoupon(s,"",i.brand_id),a=r!==!1?a+r:a)):a="取消收藏成功",o="cancel"===i.type?VIP.Mars.get("blike|"+i.brand_id):VIP.Mars.get("cblike|"+i.brand_id),Mar.Seed.request("mst","click","mst_brand_click",JSON.stringify(o))):a="收藏失败！请稍后再试。",a&&VIP.notify_tips(a,2e3),VIP.Favorite.render(t,i.brand_id,d);else{if(99===parseInt(e.code,10)&&""!==i._redirect)return VIP.Login.go(),!1;a="add"===i.type?"取消":"",VIP.notify_tips(a+"收藏失败！请稍后再试。",2e3)}}},VIP$1=window.VIP||{};window.VIP=_extends({},VIP$1,{Util:Util,Url:Url,Conf:VIPConfig,Bom:Bom,Collection:Collection,link:_e,Favorite:Favorite,stringToDate:stringToDate,compareVersion:compareVersion,sliceArr:sliceArr,cookie:cookie,loadScript:loadScript,getQueryStringByUrl:getQueryStringByUrl,getQueryString:getQueryString,checkUrlContainParam:checkUrlContainParam,replaceUrlParamVal:replaceUrlParamVal,fixImg:fixImg,curry:curry,debounce:debounce,throttle:throttle,getSwitch:getSwitch,getConfigValueByKey:getConfigValueByKey,getIdByUrl:getIdByUrl,handleUrlParam:handleUrlParam,getReplaceHref:getReplaceHref,getToSpecialTopicUrl:getToSpecialTopicUrl,modelX:modelX,adaption:adaption,Rem:Rem,dialog:dialog,floatLayer:floatLayer,Loading:Loading,notify_tips:notifyTips,goLiveRoomWithLiveState:goLiveRoomWithLiveState,genImageSrc:genImageSrc});var User=function(){function e(t){classCallCheck(this,e),this._isNewCustomer=t.isNewCustomer,this._isRegularCustomer=t.isRegularCustomer,this._type=t.type,this._groupIds=[].concat(t.groupIds),this._isLogin=t.isLogin,this._cdiTypes=t.cdiTypes}return createClass(e,[{key:"reset",value:function(t){var n=this,i=new e(t);Object.getOwnPropertyNames(i).forEach(function(e){n[e]=i[e]})}},{key:"isLogin",value:function(){return this._isLogin}},{key:"isBelongsGroup",value:function(e){return this._groupIds.indexOf(e)!==-1}},{key:"groupIds",get:function(){return[].concat(this._groupIds)}},{key:"type",get:function(){return this._type}},{key:"isNewCustomer",get:function(){return this._isNewCustomer}},{key:"isRegularCustomer",get:function(){return this._isRegularCustomer}},{key:"cdiTypes",get:function(){return[].concat(this._cdiTypes)}}],[{key:"initWithConfig",value:function(){var t=VIPConfig.getString("extend.user_type.user_consumer");return new e({cdiTypes:[].concat(VIPConfig.getArray("extend.cdi_type")),isNewCustomer:t===COSTOMER_TYPE_BY_REG_TIME.NEW_CUSTOMER,isRegularCustomer:t===COSTOMER_TYPE_BY_REG_TIME.REGULAR_CUSTOMER,type:VIPConfig.getString("extend.user_type.user_type"),groupIds:VIPConfig.getArray("extend.user_type.userGroupId"),isLogin:VIPConfig.getNumber("extend.user_login")===LOGIN_STATUS.LOGIN})}}]),e}(),PageModule=function(){function e(t,n){var i=n.html,a=n.js,r=n.css;classCallCheck(this,e),this._option=t,this._html=i,this._js=a,this._css=r,this._isLoaded=!1}return createClass(e,[{key:"destroy",value:function(){this._option=null}},{key:"isRendered",value:function(){return this._isLoaded}},{key:"html",get:function(){return this._html}},{key:"js",get:function(){return this._js}},{key:"css",get:function(){return this._css}},{key:"id",get:function(){return this._option.id}},{key:"styleId",get:function(){return this._option.style_id}},{key:"typeId",get:function(){return this._option.style_group_id}},{key:"typeName",get:function(){return this._option.module_type_id}},{key:"floor",get:function(){return this._option.floor}},{key:"width",get:function(){return this._option.extend.layout.width}},{key:"height",get:function(){return this._option.extend.layout.height}},{key:"extHeight",get:function(){return this._option.extend.layout.ext_high}},{key:"extWidth",get:function(){return this._option.extend.layout.ext_width}},{key:"renderGrade",get:function(){return this._option.extend.grade}},{key:"isPriorRender",get:function(){return this.renderGrade===RENDER_GRADE.PRIOR}},{key:"isOnSale",get:function(){return this._option.page_sale_type===SALE_STATUS.ON_SALE}},{key:"isPresell",get:function(){return this._option.page_sale_type===SALE_STATUS.PRESELL}}]),e}(),SWITCH_OPENED="1",Page$1=function(){function e(){classCallCheck(this,e),this._switch=VIPConfig.getObject("extend.switch"),this._id=VIPConfig.getNumber("data.id");var t=VIPConfig.getObject("data.jsList"),n=VIPConfig.getObject("data.cssList"),i=VIPConfig.getObject("data.htmlList");this._serverTime=VIPConfig.getNumber("extend.server_time"),this._specialId=VIPConfig.getStringInteger("data.special_id"),this._buildId=VIPConfig.getStringInteger("data.build_id"),this._modules=VIPConfig.getArray("data.moduleList").map(function(e){return new PageModule(e,{js:t[e.style_id],css:n[e.style_id],html:i[e.style_id]})})}return createClass(e,[{key:"eachModule",value:function(e){this._modules.forEach(e)}},{key:"getModule",value:function(e){return this._modules.find(function(t){return t.id===e})}},{key:"isSwitchOpen",value:function(e){return this._switch.hasOwnProperty(e)?this._switch[e]===SWITCH_OPENED:(console.error("不存在的开关"+e),!1)}},{key:"id",get:function(){return this._id}},{key:"specialId",get:function(){return this._specialId}},{key:"buildId",get:function(){return this._buildId}},{key:"serverTime",get:function(){return this._serverTime}}]),e}(),VIPVendor=function(){function e(){classCallCheck(this,e)}return createClass(e,[{key:"Mar",get:function(){return window.Mar}},{key:"Mars",get:function(){return window.Mars}}]),e}(),vendor=new VIPVendor;window.MarConfig={pageType:"page_mst"},window.VIP=window.VIP||{},$(function(){function Renderer(){}var $=jQuery,win=window,doc=document,VIP;win.mstHost=window.intfHost||"//mst.vip.com",win.mstStaticHost=window.mstStaticHost||"//"+HOST.STATIC,win.h2ImgA=window.h2ImgA||"//"+HOST.IMG_A;var isSupportedWebp=!1;try{isSupportedWebp=!![].map&&0==document.createElement("canvas").toDataURL("image/webp").indexOf("data:image/webp")}catch(e){}var convertToWebp=null;convertToWebp=isSupportedWebp&&window.traverse?function(e){var t=VIP.getConfigValueByKey("extend","switch","webp_domains").replace(/,/g,"|"),n=new RegExp("("+t+")\\/.*?((\\.(jpg)|(png))(?!\\.webp))\\b","ig"),i="!75";try{return traverse(e,function(e){return e.replace(n,function(e){return e+i+".webp"})})}catch(a){return console.log("Convert jpg png to webp failed: ",a.message),e}}:function(e){return e},window.convertToWebp=convertToWebp,VIP=win.VIP=win.VIP||{};var SHOULD_HANDLE_PAGE_COMPONENT_LIST=["brand","product","brand_with_product"];requirejs.config({baseUrl:mstStaticHost+"/demo/js/",paths:{fastclick:"other/fastclick.min",iscroll:"other/iscroll.min",swiper:"other/swpier.min",Vue:"lib/vue.min"}}),win.mstRequire=win.mstRequire||{path:{hercule:mstStaticHost+"/demo/js/hercules.js",brand:mstStaticHost+"/demo/js/modules/brand.js",product:mstStaticHost+"/demo/js/modules/product.js",filtBar:mstStaticHost+"/demo/js/modules/filtBar.js",pageV2:mstStaticHost+"/demo/js/modules/page.v2.js",fullFilterBox:mstStaticHost+"/demo/js/modules/fullFilterBox.js",filtBarV2:mstStaticHost+"/demo/js/modules/filtBar.v2.js"}},$.extend(win.mstRequire,{hercule:{callbackList:[]},brand:{callbackList:[]},product:{callbackList:[]},load:function(e,t,n){var i=this,a=t.toLowerCase(),r=i[a];""!=i.path[a]&&(r.loaded?n&&n(e):(r.callbackList.push(e),r.loading||(r.loading=!0,$.ajax({url:i.path[a],dataType:"script",cache:!0}).success(function(){r.loaded=!0,$.each(r.callbackList,function(e,t){n&&n(t)}),r.callbackList=[],r.loaded=!0}).fail(function(e){console.log(a+".js 调用失败！","status: "+e.status)}))))}});var container=$("#specialContent");$.extend(Renderer.prototype,{isInited:!1,nextReloadTime:0,pluginHeight:0,pluginIndex:0,pluginList:[],threshold:1e3,userScroll:!1,init:function(e){this.setEnv(),this.config=e.config,this.container=container,this.filtModules(),this.render(),this.bind(),this.setMars(),this.initEasterEggs()},filtModules:function(){var e,t=this,n=this.config.module_type_id?[this.config]:this.config.data.moduleList,i=(this.config.module_type_id?[this.config]:this.config.data.moduleList,[]);n.length>1&&("1"===VIP.getConfigValueByKey("extend","switch","is_finance_bottom")&&($.each(n,function(t,i){if("pg_finance"===i.module_type_id)return e=n.splice(t,1),n=n.concat(e),!1}),t.config.data.moduleList=n),1==VIP.getConfigValueByKey("extend","is_halfPurchaseToH5")&&($.each(n,function(t,i){if("pg_product_all"===i.module_type_id)return e=n.splice(t,1),n=n.concat(e),!1}),$.each(n,function(t,a){return a&&"pg_share"===a.module_type_id?(e=n.splice(t,1),i=e.concat(i),!0):a&&"pg_pms_coupon"===a.module_type_id?(e=n.splice(t,1),i=i.concat(e),!0):void 0}),n=i.concat(n),t.config.data.moduleList=n))},initReload:function(){var e,t=new Date,n=new Date,i=new Date,a=+new Date,r=Math.round(3e5*Math.random());t.setMinutes(0),t.setHours(10),t=+t,n.setMinutes(0),n.setHours(20),n=+n,i.setMinutes(0),i.setHours(10),i=+i+864e5,e=a<t?t+r:a>n?i+r:n+r;setInterval(function(){var t=+new Date;t>e&&location.reload()},1e3)},render:function(){var e=this,t=this.config.module_type_id?[this.config]:this.config.data.moduleList,n=!0,i=["custom_config","share","vis_share"],a=$("<div></div>").addClass("plugin-head-group");"1"===VIP.getQueryString("inChannel")&&$("body").addClass("mst-ipad-channel"),e.appendCss();for(var r=t.length-1;r>=0;r--)e.checkLastModule(t[r]),e.checkLastFiltBar(t[r]);VIP.Communication.listen("component-event-dispatch-root",function(){var e=Array.prototype.slice.call(arguments);VIP.Communication.dispatch("component-event-broadcast",e.splice(1,e.length-1))}),$.each(t,function(t,r){var o,s,c,d=n||document.documentElement.clientWidth<=540?document.documentElement.clientWidth>632?632:document.documentElement.clientWidth:540,l=$("<div></div>").addClass("plugin").attr("mars_container_slice",""),u=i.indexOf(r.module_type_id)==-1,p="share"==r.module_type_id?"1":r.extend&&r.extend.grade||"3",f=$.extend({un_display_list:[]},r.model);if(e.compatiblePageData(r),"head"!==r.module_type_id&&r.model&&r.model.anchor&&l.attr("data-anchor-name",r.model.anchor),e.pluginList.push(l.attr("data-index",t)),e.fixUnDisplayList(f),"edit"!==VIP.getConfigValueByKey("data","page_data","page_show_type")&&!e.checkLiveTime(r)||f.un_display_list.indexOf(VIP.defaultParam.client)>-1)return!0;if(!e.checkAbTest(r))return!0;var g,_={width:0,height:0};switch(o=r.extend?r.extend.layout||_:_,g=100===o.width?538:o.width,c=d/g,s=parseInt((o.height||0)*c)||0,s=e.handleHalfPurchasePageHeight(s),r.module_type_id){case"head":n?(s&&a.height(s),n=!1,a.appendTo(e.container).append(l)):(u&&s&&l.height(s),l.appendTo(e.container));break;default:u&&s&&l.height(s),l.appendTo(e.container)}FloorPlaceholder.enable&&FloorPlaceholder.paint(r,t,l),e.pluginHeight<=e.preloadHeight&&(u&&(e.pluginHeight+=s),e.pluginIndex++,e.createModule(r,t),e.clearDomHeight(l)),"1"==p&&(e.createModule(r,t),e.clearDomHeight(l))}),e.handleLast()},setComponentBackground:function(e,t,n){var i=$.trim(t.bgcolor)||"";e.css({"background-color":"#"+i}),i&&(6!==i.length||i.indexOf("#")>-1)&&console.warn("楼层"+n+"背景色设置有误，必须是6位")},fixUnDisplayList:function(e){e.un_display_list=e.un_display_list.map(function(e,t){return e=fixClient(e)})},compatiblePageData:function(e){e.page_data=e.page_data||window.config.data.page_data},handleHalfPurchasePageHeight:function(e){return"0"===VIP.getConfigValueByKey("extend","switch","is_viscomponent_canholdheight")&&"1"===this.config.data.page_data.purchase_type&&(e=0),e},handleLast:function(e){var t='<div id="J_notify_tips" class="notify-tips"></div>';$("body").append(t),VIP.Communication.dispatch("component-event-broadcast-done")},checkLastModule:function(e){return!(!e.extend||!e.extend.page||"true"!==e.extend.page.isPaging||1==this.isLast)&&(this.isLast=e.isLast=!0,!0)},checkLastFiltBar:function(e){return!!(e.model&&"true"===e.model.is_filtBar&&1!=this.isFiltBar||e.model&&"true"===e.model.is_filtBar&&"pg_product"===e.module_type_id)&&(this.isFiltBar=e.isFiltBar=!0,!0)},createModule:function(e,t){if(!e.isLoaded){var n=this,i=this.pluginList[t],a=e.css,r=!e.template&&e.style_id?window.config.data.htmlList[e.style_id]:e.template,o=e.extend,s=(o&&o.page?+o.page.total||+o.page.amount:0,e.model||{});i.attr("data-loaded","true").append(r),this.setComponentBackground(i,s,t),FloorPlaceholder.enable&&FloorPlaceholder.remove(e,t,i),""!=a&&(a=VIP.modelX(a),i.append(this.getCssString(a))),e.isLoaded=!0;var c=n.isSyncComponent(e.module_type_id);c?n.syncComponentData(i,e,t):(n.initConfigPage(e),n.handleAfterAcceptData(i,e,t))}},initConfigPage:function(e){var t=e.extend||{},n=t.page,i="1"===VIP.getSwitch("is_handle_component_page");i&&SHOULD_HANDLE_PAGE_COMPONENT_LIST.indexOf(e.module_type_id)>-1&&n&&(n.total=!n.total||n.total>n.amount?n.amount:n.total)},isSyncComponent:function e(t){var n=VIP.getConfigValueByKey("extend","switch","homepage_async_plugins")||"",e=!1;return n=n.split(","),n.indexOf(t)>-1&&(e=!0),e},syncComponentData:function(e,t,n){var i=this,a=$.extend(!0,{page:{is_personality:!0,limit:30}},t.extend),r=a.page,o=t.model||{},s=!0,c="1"===VIP.getConfigValueByKey("extend","switch","switch_vre_paging");switch(t.module_type_id){case"purchase":var d=i.hasInsertPurchaseData(o),l="1"===VIP.getSwitch("is_force_get_purchase_data");if(l||d){var u={plugin_id:t.id,floor:t.floor,client:VIP.defaultParam.client,warehouse:VIP.defaultParam.warehouse};VIP["interface"].getPurchaseData(u).done(function(a){t.data=a.data,i.handleAfterAcceptData(e,t,n)}).fail(function(e){console.log("楼层"+n+"品购数据加载失败,楼层渲染没有渲染！")})}else i.handleAfterAcceptData(e,t,n);break;case"brand":var u={floor:t.floor,is_personality:r.is_personality,plugin_id:t.id,offset:0,limit:r.limit};s&&VIP.getQueryString("extra_brand_id")&&($.extend(!0,u,{extra_brand_id:VIP.getQueryString("extra_brand_id")||0}),s=!1),VIP["interface"].getBrandData(u).done(function(a){t.data=a.data,t.extend&&$.extend(!0,t.extend.page,a.page,{offset:a.page.limit,total:r.total||a.page.amount}),c&&a.page.vre_ids&&(t.extend.vre_ids=a.page.vre_ids||""),i.initConfigPage(t),i.handleAfterAcceptData(e,t,n)}).fail(function(e){console.log("楼层"+n+"档期数据加载失败,楼层渲染没有渲染！")});break;case"product":var u={floor:t.floor,is_personality:r.is_personality,is_sinking:r.is_sinking||!0,is_pre_pay:o.is_pre_pay||"0",plugin_id:t.id,offset:0,limit:r.limit};VIP["interface"].getProductData(u).done(function(a){t.data=a.data,t.extend&&$.extend(!0,t.extend.page,a.page,{offset:a.page.limit,total:r.total||a.page.amount}),c&&(t.extend.vre_ids=a.page.vre_ids||""),i.initConfigPage(t),i.handleAfterAcceptData(e,t,n)}).fail(function(e){console.log("楼层"+n+"商品数据加载失败,楼层渲染没有渲染！")});break;case"brand_with_product":var p=r.limit>10?10:r.limit;r.offset=r.limit=p;var u={plugin_id:t.id,offset:0,limit:r.limit,product_num:o.extend_product_num||8},f=function(a){VIP.transBrandWidthProductAjaxData(t,a.data),t.extend&&$.extend(!0,t.extend.page,a.page,{offset:a.page.limit,total:r.total||a.page.amount}),c&&(t.extend.vre_ids=a.page.vre_ids||""),
i.initConfigPage(t),i.handleAfterAcceptData(e,t,n)};VIP["interface"].getBrandWidthProductData(u).done(f).fail(function(e){console.log("楼层"+n+"档期商品数据加载失败,楼层渲染没有渲染！")});break;case"pg_purchase":var d=i.hasInsertPurchaseData(o),l="1"===VIP.getSwitch("is_force_get_purchase_data");if(l||d){var u={plugin_id:t.id,floor:t.floor,client:VIP.defaultParam.client,warehouse:VIP.defaultParam.warehouse};VIP["interface"].getPurchaseData(u).done(function(a){t.data=a.data,i.handleAfterAcceptData(e,t,n)}).fail(function(e){console.log("楼层"+n+"品购数据加载失败,楼层渲染没有渲染！")})}else i.handleAfterAcceptData(e,t,n);break;case"categoryFloor":var u={plugin_id:t.id};VIP["interface"].getCategory(u).done(function(a){t.data=a.data,i.handleAfterAcceptData(e,t,n)}).fail(function(e){console.log("楼层"+n+"品类数据加载失败,楼层渲染没有渲染！")});break;case"pg_product":var u={page_id:t.page_data.page_id,floor:t.floor,is_personality:"1"==o.is_personality,is_sinking:!0,is_pre_pay:o.is_pre_pay||"0",mars_cid:VIP.defaultParam.mars_cid,plugin_id:t.id,time:VIP.defaultParam.time,is_front:VIP.defaultParam.is_front,warehouse:VIP.defaultParam.warehouse,brand_id:VIP.getConfigValueByKey("data","page_data","brand_id"),limit:r.limit,offset:0};VIP["interface"].getVisPgFilterProduct(u).done(function(a){t.data=a.data,t.extend&&$.extend(!0,t.extend.page,a.page,{offset:a.page.limit,total:r.total||a.page.amount}),"1"==VIP.getSwitch("is_prevent_pg_product_scroll_load_data")&&t.extend&&t.extend.page&&(t.extend.page.amount=0),i.handleAfterAcceptData(e,t,n)}).fail(function(e){console.log("楼层"+n+"品购商品数据加载失败,楼层渲染没有渲染！")});break;default:i.handleAfterAcceptData(e,t,n)}},hasInsertPurchaseData:function(e){var t=this,n=e.list||[],i=e.rule_list||{},a=e.active_product||[],r=t.hasPositionInList(n);return r||($.each(i,function(e,n){var i=n.list||[];if(t.hasPositionInList(i))return r=!0,!1}),a&&a.length&&(r=!0)),r},hasPositionInList:function(e){var t=!1;return e.length&&$.each(e,function(e,n){if(n.position)return t=!0,!1}),t},handleAfterAcceptData:function(e,t,n){this.evalJs(e,t,n),this.afterEvalJs(e,t,n)},evalJs:function evalJs($dom,config,index){var that=this,js=!config.js&&config.style_id?window.config.data.jsList[config.style_id]:config.js,isConvertWebp="1"===VIP.getConfigValueByKey("extend","switch","is_convert_webp");try{var mlink=window.config&&window.config.data.urlList?window.config.data.urlList[config.style_id]:"";if(mlink){var extend={el:$("<div></div>").appendTo($dom).get(0),data:{global:$.extend(!0,{},window.config.data.page_data,window.config.extend),frame:$.extend(!0,{},{mlink:mlink,index:index}),sources:$.extend(!0,{}),options:$.extend(!0,{},config.model),discard:$.extend(!0,{},config)}};require([mlink,"Vue"],function(e,t){var n=$.extend(!0,{},e,{mixins:(e.mixins||[]).concat(extend),mounted:e.ready});new t(n)})}else if(isConvertWebp&&config.model&&convertToWebp(config.model),"function"==typeof js)js.call($dom,$dom,config,index);else if("string"==typeof js&&js)eval("(function(){return function(dom, config, index){"+js+"}})()").call($dom,$dom,config,index);else{var compJs=window["__renderMstComp"+config.style_id];"function"==typeof compJs&&compJs.call($dom,$dom,config,index)}}catch(e){console.log(e.message),VIP.defaultParam.log.push(e.message)}},afterEvalJs:function(e,t,n){var i=this,a=t.extend,r='<div class="mst-page-load u-loading u-more-btn J_pager_more"></div>',o=a&&a.page?+a.page.total||+a.page.amount:0;setTimeout(function(){e.find("img.mst-lazy").lazyload({threshold:i.threshold,load:function(){this.removeAttribute("height")}})},50),t.isLast&&a&&a.page&&(!o||o>+a.page.limit)&&e.append(r),this.initMars(e,t,n)},getCssString:function(e){return"<style>"+e+"</style>"},checkToReload:function(){},appendCss:function(){var e=this,t=e.config.data&&e.config.data.cssList?e.config.data.cssList:[],n="";t&&($.each(t,function(e,t){n+="\n"+VIP.modelX(t)}),e.container.append(e.getCssString(n)))},bind:function(){var e=this;$(win).bind("touchstart touchmove scroll",function(t){e.preload()})},preload:function(){var e=this,t=doc.body.scrollTop||$(win).scrollTop(),n=e.container.find(".plugin[data-loaded!=true]");e.userScroll=!0,n.length&&n.each(function(n,i){if(!this.getAttribute("data-loaded")){var a=$(this),r=a.attr("data-index"),o=a.offset().top;t+2*document.documentElement.clientHeight>=o&&o>t-a.height()&&(e.createModule(window.config.data.moduleList[r],r),e.clearDomHeight(e.pluginList[r]))}})},clearDomHeight:function(e,t){var t=t||1e3;setTimeout(function(){e.css({height:"auto"}).addClass("plugin-loaded")},t)},setMars:function(){if("undefined"!=typeof window.mstDomStartTime){var e,t=this,n=t.container.find("img"),i=[],a=0,r=0,o=(window.mstDomStartTime||0,performance?performance.timing.responseEnd-performance.timing.navigationStart:0);n.each(function(n,s){var c=$(this),d=$(new Image);i.push(d),c.offset().top<t.preloadHeight&&(a++,d.attr("src",c.attr("data-original")||c.attr("src")),d.bind("load",function(){r++,r==a&&(e=(new Date).getTime()-(window.mstDomStartTime||0)+o,Mar.Seed.request("mst","load","mst_firstScreen_time",e))}))})}},checkLiveTime:function(e){if(!window.config||!window.config.extend)return!0;var t=!!window.config.extend.server_time&&parseInt(window.config.extend.server_time);if(t&&e.model&&e.model.live){var n=!!e.model.live.start_time&&VIP.stringToDate(e.model.live.start_time),i=!!e.model.live.end_time&&VIP.stringToDate(e.model.live.end_time),a=!!n&&n.getTime()/1e3,r=!!i&&i.getTime()/1e3;return!(a&&t<a||r&&t>r)}return!0},checkAbTest:function(e){return!window.config||!window.config.extend||(VIP.getQueryString("user_abtest_group")&&"background"===VIP.getConfigValueByKey("data","page_data","page_show_type")&&(e.user_abtest_group=VIP.getQueryString("user_abtest_group")||"all"),!(e.user_abtest_group&&e.model&&e.model.abtest_info&&"0"!==e.model.abtest_info.abtest_group)||("all"===e.user_abtest_group||e.user_abtest_group.toLowerCase()===e.model.abtest_info.abtest_group.toLowerCase()))},addSpecialMars:function(e){e=e||{};var t=e.model||{},n={};switch(e.module_type_id){case"brand":var i=t.data_type&&"auto"===t.data_type?1:0,a=t.automation_id||"";i&&a&&(n.is_gce_data=1,n.rule_id=a);break;case"product":var i=t.data_type&&"auto"===t.data_type?1:0,a=t.automation_id||"";i&&a&&(n.is_gce_data=1,n.rule_id=a)}return n},initMars:function(e,t,n){var i=window.config,a=this;i&&(VIP.Mars.set(n),++n,e.on("click","[mst-mars]",{},function(i){var r=$(this),o=$(i.target),s=e.find("[mst-mars]"),c="undefined"==typeof r.attr("mst-mars")?o.parents("[mst-mars]:eq(0)"):r,d=+s.index(c)+1,l=+n+"_"+d,u=VIP.Mars.get(c.attr("mst-mars"),l),p=c.attr("mst-tag"),f=VIP.getQueryString("extra_tag")?VIP.getQueryString("extra_tag")+",":"",g=f+p,_=t.model||{m_name:""},m={module:n+"",seq:d+"",tag:g,m_id:t.id,m_name:_.m_name,style_id:t.style_id},h=a.addSpecialMars(t),v="mst_"+t.module_type_id+"_click";u=$.extend(u,m,h),Mar.Seed.request(o[0].tagName.toLowerCase(),"click",v,JSON.stringify(u))}))},initEasterEggs:function(){VIP.easterEggs&&(VIP.easterEggs.info.log.data=VIP.defaultParam.log,VIP.easterEggs.info.brands.data=$.map(config.data.moduleList,function(e,t){if("brand"==e.module_type_id||"brand_with_product"==e.module_type_id)return e.data=$.map(e.data,function(e,t){if(!e.hide)return e}),e.extend.page&&"true"==e.extend.page.isPaging?e.data.length+"(第一页)":e.data.length}),VIP.easterEggs.info.products.data=$.map(config.data.moduleList,function(e,t){if("product"==e.module_type_id||"pg_product"==e.module_type_id||"pg_product_pc"==e.module_type_id)return e.data=$.map(e.data,function(e,t){if(!e.hide)return e}),e.extend.page&&"true"==e.extend.page.isPaging?e.data.length+"(第一页)":e.data.length}),$("body").on("touchstart",function(e){3==e.originalEvent.touches.length&&VIP.easterEggs.timedCount()}).on("touchend",function(){VIP.easterEggs.resetTime()}).on("scroll",function(e){e.stopPropagation()}).on("click",".mst-layer-btn-cancel",function(e){$(".mst-layer").animate({opacity:0},100,function(){$(this).remove()}),$("html").removeClass("scroll-fix")}))},setEnv:function(){Object.defineProperty&&Object.defineProperty(window,"config",{writable:!1}),this.preloadHeight=1.5*document.documentElement.clientHeight,"undefined"!=typeof window.Vue&&(Vue.config.debug=!1),"1"===VIP.getConfigValueByKey("extend","switch","is_fastclick")&&require(["fastclick"],function(e){e.attach(document.body)}),"1"===VIP.getConfigValueByKey("extend","switch","is_performance_scrollclick")&&disableScrollClick&&disableScrollClick()}}),VIP.getBrandUrl=function(e){return"//m.vip.com/brand-"+e+"-0-0-0-1-0-1-20.html?m=brand&brand_id="+e},VIP.getProductUrl=function(e,t){return"//m.vip.com/product-"+e+"-"+t+".html?m=product&brand_id="+e+"&product_id="+t},VIP.initDefaulParam=function(){var e=new Date,t=e.getFullYear(),n=e.getMonth()+1,i=e.getDate(),a=t+""+n+i,r=Math.ceil((new Date).getTime()/1e3/300),r=a+""+r,o=this.getQueryString("width"),s=this.getQueryString("height"),c=fixClient(this.getQueryString("client")),d=this.getQueryString("app_version"),l=this.getQueryString("app_name")||"",u=this.getQueryString("mobile_platform"),p=this.getQueryString("warehouse")||VIP.getConfigValueByKey("data","page_data","warehouse")||"VIP_NH",f=this.getQueryString("area_id"),g=this.getQueryString("net"),_=this.getQueryString("mars_cid"),m=this.getQueryString("is_preload"),h=this.getQueryString("newcustomer"),v=this.getQueryString("wap_consumer"),y=this.getQueryString("m"),w=location.href.replace(/&/g,"%@^_"),b=w.indexOf("m.vip.com"),P=3,I=this.getQueryString("source")||"app",x=this.getQueryString("user_id"),V=["iphone","android","ipad","androidpad","windowsphone","windowspad"],S=V.indexOf(c)>-1,k="iphone"==c,C="android"==c,T="ipad"==c,$="windowsphone"==c,A="windowspad"==c,L=/micromessenger/i.test(navigator.userAgent.toLowerCase()),O=c==LITEAPPCLIENT.LITEAPP,j=c==QUICKAPPCLIENT.QUICKAPP,E=c==BAIDUSMALLCLIENT.BAIDUSMALL,B=this.getQueryString("extra_tag"),U="mst_"+VIP.getConfigValueByKey("data","id"),D=VIP.getConfigValueByKey("data","id"),R=VIP.getConfigValueByKey("data","build_id"),M=VIP.getQueryString("group_id")||VIP.getQueryString("extra_source_id")||VIP.getQueryString("extra_banner")||0,N=VIP.getConfigValueByKey("data","page_data","page_show_type"),F="2"===VIP.getConfigValueByKey("extend","user_type","user_consumer"),H=VIP.getQueryString("time")||0,z="background"===N?1:0,Q="frontend"===N?1:0,W="edit"===N?1:0,G=l.indexOf("vipfinance_")>-1,K=!G&&(j||O||E||S),q=getFdcAreaId(p),J=VIP.getQueryString("mobile_channel"),Y=VIP.getQueryString("vipruid"),X=VIP.getQueryString("oxo_province_id"),Z=VIP.getQueryString("oxo_city_id"),ee=VIP.getQueryString("oxo_district_id");c=/^(phone|pad)$/.test(c)?"wap":c,(!window.location.search||parseInt(b)>1||!c||"wap"===c)&&(I="wap",o="640",s="460",c="wap",l="shop_wap",f=this.cookie("m_vip_province"),g="WIFI",_=this.cookie("mars_cid"),m="1",h=0,v=this.cookie("wap_consumer"),x=""),Q||(f=notFrontGetAreaId(p)),f=f?f:0,g=g?g:"WIFI","background"===VIP.getConfigValueByKey("data","page_data","page_show_type")&&(I="www"),VIP.defaultParam={verstr:r,source:I,width:o,height:s,client:c,app_version:d,app_name:l,warehouse:p,area_id:f,net:g,mars_cid:_,is_preload:m,newcustomer:h,wap_consumer:v,m_special:y,item_id:P,referer_currurl:w,wapurlpos:b,is_app:S,is_wap:"wap"==c,is_iphone:k,is_android:C,is_ipad:T,is_windowsphone:$,is_windowspad:A,is_weixin:L,is_liteapp:O,is_quickapp:j,is_baidusmall:E,mst_mars:B,wap_id:U,page_id:D,special_id:R,page_show_type:N,extra_banner:M,protocol_version:VIP.getQueryString("protocol_version"),log:[],time:H,is_front:Q,is_edit:W,is_background:z,is_old_consumer:F,mobile_platform:u,can_use_hercules:K,is_finance_app:G,fdc_area_id:q,mobile_channel:J,vipruid:Y,oxo_province_id:X,oxo_city_id:Z,oxo_district_id:ee}},VIP.getClientImageSrc=function(e,t){if(""==e||!e)return e;var n=["wechat_mini_program","shop_quick_app","shop_baidu_small"];e=e.replace(/^http:/,"");var t=t||"brand",i={iphone:{"2g":"604x290_50","3g":"604x290_50","2g/3g":"604x290_50","4g":"604x290_80",wifi:"604x290_80"},windows:{"2g":"604x290_50","3g":"604x290_50","2g/3g":"604x290_50","4g":"604x290_80",wifi:"604x290_80"},ipad:{"2g":"604x290_80","3g":"604x290_80","2g/3g":"604x290_80","4g":"604x290_80",wifi:"604x290_80"},android:{"2g":[{exp:"gl:eq:",condition:"1080","return":"604x290_50"},{exp:"gt:",condition:"1080","return":"456x576_50"}],"3g":[{exp:"gl:eq:",condition:"1080","return":"604x290_50"},{exp:"gt:",condition:"1080","return":"456x576_50"}],"2g/3g":[{exp:"gl:eq:",condition:"1080","return":"604x290_50"},{exp:"gt:",condition:"1080","return":"456x576_50"}],"4g":[{exp:"gl:eq:",condition:"1080","return":"604x290_80"},{exp:"gt:",condition:"1080","return":"456x576_80"}],wifi:[{exp:"gl:eq:",condition:"1080","return":"604x290_80"},{exp:"gt:",condition:"1080","return":"456x576_80"}]},wap:{"2g":"604x290_50","3g":"604x290_50","2g/3g":"604x290_50","4g":"604x290_80",wifi:"604x290_80"}},a=e.indexOf("upload/merchandise")>-1||"product"==t;if(n.map(function(e){i[e]={"2g":"604x290_50","3g":"604x290_50","2g/3g":"604x290_50","4g":"604x290_80",wifi:"604x290_80"}}),a){var r="1"===VIP.getConfigValueByKey("extend","switch","is_product_picture_360x456")?"360x456":"304x384";i={iphone:{"2g":r+"_50","3g":r+"_50","2g/3g":r+"_50","4g":r+"_80",wifi:r+"_90"},windows:{"2g":r+"_50","3g":r+"_50","2g/3g":r+"_50","4g":r+"_80",wifi:r+"_90"},ipad:{"2g":r+"_80","3g":r+"_80","2g/3g":r+"_80","4g":r+"_80",wifi:r+"_90"},android:{"2g":[{exp:"gl:eq:",condition:"1080","return":r+"_50"},{exp:"gt:",condition:"1080","return":"456x576_50"}],"3g":[{exp:"gl:eq:",condition:"1080","return":r+"_50"},{exp:"gt:",condition:"1080","return":"456x576_50"}],"2g/3g":[{exp:"gl:eq:",condition:"1080","return":r+"_50"},{exp:"gt:",condition:"1080","return":"456x576_50"}],"4g":[{exp:"gl:eq:",condition:"1080","return":r+"_80"},{exp:"gt:",condition:"1080","return":"456x576_80"}],wifi:[{exp:"gl:eq:",condition:"1080","return":r+"_80"},{exp:"gt:",condition:"1080","return":"456x576_80"}]},wap:{"2g":r+"_50","3g":r+"_50","2g/3g":r+"_50","4g":r+"_80",wifi:r+"_90"}},n.map(function(e){i[e]={"2g":r+"_50","3g":r+"_50","2g/3g":r+"_50","4g":r+"_80",wifi:r+"_90"}})}var o,s,c=VIP.defaultParam,d=i[c.client.toLowerCase()][c.net.toLowerCase()],l=c.width,u=/(.+)(\.(?:png|jpg|gif|bmp|webp|JPG|PNG|GIF|WEBP))$/i,p=e.match(u);if(d=a?d||"304x384_50":"store_logo"===t?"200x100_80":d||"604x290_50",Array.isArray(d))for(var f=0;f<d.length;f++)switch(s=d[f],s.exp){case"gl:eq:":l<=s.condition&&(o=s["return"]);break;case"gl:":l<s.condition&&(o=s["return"]);break;case"gt:":l>s.condition&&(o=s["return"])}else o=d;return o&&p&&p.length>=2&&(e=p[1]+"_"+o+p[2]),e},VIP.isInSale=function(e){var t=(new Date).getTime(),e=new Date(e).getTime();return!(t<e)},VIP.initDefaulParam(),VIP.tmpl={size:'<div class="mst-size" id="J-size">                        <div class="mst-size-mask" onclick="VIP.Sizing.displayPannel(0)"></div>                        <div class="mst-size-wrap">                            <div class="mst-size-head">                                <div class="mst-size-pro">                                    <img alt="" src="${small_image}" />                                    <div class="mst-size-info">                                        <p class="mst-size-title">${product_name}</p>                                        <div class="mst-size-price">                                            <i class="mst-size-price-now">{{if typeof(promotion_price_type) != "undefined" && (promotion_price_type == 203 || promotion_price_type == 18) && typeof(promotion_price) != "undefined" && promotion_price != ""}}￥${promotion_price}{{else}}￥${vipshop_price}{{/if}}</i>                                            <i> <strike>￥${market_price}</strike>                                             <em>{{if !(typeof(promotion_price_type) != "undefined" && (promotion_price_type == 203 || promotion_price_type == 18))}}${vip_discount}{{/if}}</em></i>                                        </div>                                    </div>                                </div>                            </div>                            <div class="mst-size-content">                                <p class="mst-size-tips">                                    尺码                                </p>                                <p class="mst-size-yardage {{if skuList.length <= 2}}mst-size-yardage-big{{/if}}">                                    {{each(key,value) skuList}}                                        <span data-size-id="${value.id}" {{if type == 1 || type == 2}}class="unactive"{{/if}}>${value.name} <em></em></span>                                    {{/each}}                                </p>                            </div>                            <div class="mst-size-btns">                                <a class="mst-size-btn">确 认</a>                            </div>                            <span class="mst-size-close" onclick="VIP.Sizing.displayPannel(0)">×</span>                        </div>                    </div>',loading:'<div class="mst-global-loading" id="J-mst-global-loading">                          <div class="mst-gl-mask"></div>                          <div class="mst-gl-body">                               <svg class="mst-loading-svg" viewBox="0 0 150 150"> <g class="circle"> <circle cx="75" cy="75" r="72"></circle> <circle cx="75" cy="75" r="72" class="rotation"></circle> </g> <g class="logo-idle"> <path d="M32 62 L47 100 L62 62 M77 49 A0.1 0.1, 0 1 1, 80 52 A0.1 0.1, 0 1 1, 77 49 Z M78 62 L78 100 M95 113 L95 62 L95 85 A15 15, 0 1 1, 130 78 A15 15, 0 1 1, 95 85 Z"></path> </g> </svg> </div>                     </div>'},VIP.Sizing={customCallBack:null,dealTmpl:function(e){var t=VIP.tmpl.size,n="J-size",i=this;$("#"+n).remove(),$.tmpl(t,e).appendTo($("body")),this.dom=$("#"+n),this.dom.on("click",".mst-size-btn",function(){if(e.sizeChosecallback){if(!i.sizeId)return void VIP.notify_tips("请选择尺码",2e3);var t=i.getSizeById(e.skuList,i.sizeId);e.sizeChosecallback(t),i.displayPannel(0)}else i.pullToApp(e.addType,"",""+e.brand_id,""+e.product_id)})},showPannel:function(e){var t=this;if(e.skuList){delete e.dom,t.dealTmpl(e);var n="active",i="unactive";t.productId=e.product_id,t.displayPannel(1),t.dom.find(".mst-size-yardage span").bind("click",function(){var e=$(this),a=t.dom.find(".mst-size-yardage .active");return!e.hasClass(i)&&!a.is(e)&&(a.removeClass(n),e.addClass(n),void(t.sizeId=e.attr("data-size-id")))})}VIP.Loading.hide()},displayPannel:function(e){var t=this.dom,n=t.find(".mst-size-wrap"),i=0,a=500;delete this.sizeId,0===e?(i=n.height(),t.fadeOut(a),n.animate({bottom:-i},a,function(){VIP.Sizing.displayFloatUI(1)})):(t.show(),i=n.height(),t.hide(),VIP.Sizing.displayFloatUI(0),t.fadeIn(a),n.css("bottom",-300).animate({bottom:0},a))},pullToApp:function(e,t,n,i,a){var r,i=(event?event:window.event,this.productId||i),o=$("[data-product-id="+i+"]"),n=n||o.data("brandId"),s=t?t.split(","):[],c=document.body.scrollLeft,d=document.body.scrollTop,t=t||this.sizeId,l=VIP.defaultParam,u="";if(s=s.length>1?s:[s],!t)return void VIP.notify_tips("请选择尺码",2e3);switch(a&&(this.customCallBack=a),e){case"collect":u=a?"VIP.Sizing.customCallBack":"VIP.Sizing.pullToCollectCallback",r="vipshop://addFavourite?sku="+t+"&goodsId="+i+"&brandId="+n+"&isHeat=1&jsFunction="+u;break;case"unCollect":u=a?"VIP.Sizing.customCallBack":"VIP.Sizing.pullToCollectCallback",r="vipshop://delFavourite?sku="+t+"&jsFunction="+u;break;case"addCart":l.can_use_hercules?VIP.hercules({type:"cart",name:"addCart",param:{sizeId:t,brandId:n,productId:i,sizeNum:1},succ:function(e){a?a():VIP.Sizing.pullToCartCallback()},fail:function(){VIP.notify_tips("您当前app版本暂不支持加入购物车，建议升级app新版本体验")}}):(u=a?"VIP.Sizing.customCallBack":"VIP.Sizing.pullToCartCallback",r="vipshop://addCart?sizeId="+t+"&brandId="+n+"&productId="+i+"&sizeNum=1&jsFunction="+u)}"collect"!=e&&"unCollect"!=e||location.hash||(location.hash+="position="+c+","+d+"&action=VIP.Sizing.pullToApp&type="+e+"&sizeId="+t+"&productId="+i),this.params={type:e,productId:i},r&&(location.href=r)},pullToCollectCallback:function(e){var t=this.params.productId;200==e&&("unCollect"==this.params.type?$("[data-product-id="+t+"]").attr("data-type","collect"):$("[data-product-id="+t+"]").attr("data-type","unCollect")),this.afterCallback()},pullToCartCallback:function(e){VIP.Mars.send("mst_product_click","addCartSuccess|"+this.sizeId,"0_0"),this.afterCallback()},afterCallback:function(){this.displayPannel(0)},init:function(e){"1"===VIP.getConfigValueByKey("extend","switch","is_addCart")&&VIP.Sizing.displayFloatUI(1)},afterInit:function afterInit(params){params.position&&window.scrollTo(params.position.split(",")[0],params.position.split(",")[1]),params.action&&""!=params.action&&eval(params.action+'("'+params.type+'","'+params.sizeId+'","'+params.productId+'")')},getSkuByMid:function(e,t){var n=this,i={product_id:e.product_id,client:VIP.defaultParam.client,app_version:VIP.defaultParam.app_version};$.ajax({url:win.mstHost+"/product/getSkuByMid",data:i,dataType:"jsonp",showLoading:!0,success:function(i){if(t)t(i);else{var a=i.data[0],r=a.skuDetail,o=r[0];if(1==r.length&&0==o.type)VIP.defaultParam.is_app?(n.sizeId=o.id,VIP.Sizing.pullToApp("addCart",""+o.id,""+e.brand_id,""+e.product_id)):VIP.router(e.dom[0],"product",e.brand_id+"-"+e.product_id,"唯品会");else if(r.length>1){e.skuList=r;var s=!1;$.each(r,function(e,t){if(0!=t.stock)return s=!0,!1}),VIP.defaultParam.is_app&&s?(VIP.Sizing.showPannel(e),VIP.Mars.send("mst_product_click","addCart|"+e.product_id,e.dom.attr("mst-rank")||"")):VIP.router(e.dom[0],"product",e.brand_id+"-"+e.product_id,"唯品会")}else VIP.router(e.dom[0],"product",e.brand_id+"-"+e.product_id,"唯品会")}}})},getSizeById:function(e,t){var n=!1;return $.each(e,function(e,i){i.id==t&&(n=i)}),n},displayFloatUI:function(e){VIP.hercules({type:"ui",name:"showFloatView",param:{flag:e}})},userSelectSizeCallback:function(e,t){t&&"function"==typeof t&&t(e)}},VIP.share={filterVersion:function(e){return e.replace(/^8./,"")},canShare:function(){var e=VIP.defaultParam,t=e.app_version;return!(!e.is_ipad||!VIP.compareVersion(t,"5.6"))||!(!e.is_iphone&&!e.is_android||!VIP.compareVersion(t,"5.1"))},getId:function(){var e=0;return window.config&&$.each(window.config.data.moduleList,function(t,n){if("share"==n.module_type_id&&n.model)return e=n.model.plugin_id,!1}),e},autoshare:function(){VIP.defaultParam.is_app&&VIP.hercules({type:"share",name:"autoShare",param:{type:"1"}})},appShare:function(e,t){VIP.defaultParam.is_app&&VIP.hercules({type:"share",name:"shareSpecial",param:{shareId:e,specialUrl:t}})},getPurchaseType:function(){return VIP.getConfigValueByKey("data","page_data","purchase_type")}},VIP.getPmsMsg=function(e,t){function n(e){var t=[];for(var n in e.data)t.push({id:+n,pms_msg:e.data[n].msg});return e.data=t,e.result=!0,e}var i=VIP.defaultParam,a="1"===VIP.getSwitch("is_use_pms_mapi")?1:0,r="";if(r=a?"//mapi.vip.com/vips-mobile/rest/activity/api/mst/get_activity_tips_byBrandIds":win.mstHost+"/Special/getPMS",$.extend(e,{mobile_platform:i.is_app?3:2}),a){var o=VIP.getQueryString("mobile_channel")||"";$.extend(e,{mobile_channel:o,api_key:"34a65f18bae9439589ae5f889bc37075"})}$.ajax({url:r,data:e,dataType:"jsonp",success:function(e){if(a&&(e=n(e)),t)t(e);else{var i,r,o=e.data;if(e.result)for(var s=0;s<o.length;s++)r=o[s],r.pms_msg&&(i=$('<span class="s_info_desc">'+r.pms_msg+"</span>"),$("div[data-brand-id="+r.id+"] .tpl_pic").append(i));else console.log("PMS接口返回错误")}},error:function(){console.log("PMS接口返回错误")}})},VIP.getSoldOutList=function(e,t){var n=VIP.defaultParam;return $.extend(e,{area_id:n.area_id,mars_cid:n.mars_cid,is_mobile:1}),$.ajax({url:win.mstHost+"/Special/getProductSkuStockStatus",data:e,dataType:"jsonp",success:function(e){t?t(e):e.result?$.each(e.data,function(e,t){t&&$("[data-soldout-productid="+t+"]").show()}):console.log("商品库存接口返回错误！")},error:function(){}})},VIP.getSoldOutListNew=function(e,t){var n=win.mstHost+"/Stock/checkStock",i=VIP.defaultParam,a="1"===VIP.getSwitch("is_use_stock_apis");return!i.is_edit&&($.extend(e,{area_id:i.area_id,mars_cid:i.mars_cid,is_mobile:1}),a?VIP["interface"].checkStockByStockApi(e,t):$.ajax({url:n,data:e,dataType:"jsonp"}).then(function(e){t?t(e):e.result?$.each(e.data,function(e,t){t&&$("[data-soldout-productid="+t+"]").show()}):console.log("商品库存接口返回错误！")},function(e){console.log("商品库存接口返回错误！")}))},VIP.router=function(e,t,n,i,a){function r(e){var t=e.match(/.+(\/vis\/pages(\/x\/(\d{1,2})\/(\d{1,2})){0,1}\/(\d+)\/([1|2])\.html)(.*)/);return!!(t&&t.length>1)&&t[1]}var o={},s=VIP.defaultParam,c=getRouterClient(),d=e&&e.getAttribute("mst-tag")?e.getAttribute("mst-tag"):"",l=VIP.getQueryString("extra_tag")?VIP.getQueryString("extra_tag")+",":"",u=l+d,p=d?"source_tag="+u:"",f=l?l:d,g="all",_=!!window.config&&window.config.data.page_data.purchase_type,m=window.config&&+window.config.data.page_data.mst_type,h="background"===VIP.getConfigValueByKey("data","page_data","page_show_type")?"www":"wap";if(window.preventScrollTouch)return void(window.preventScrollTouch=!1);switch(i=encodeURIComponent(i),o={brand:{wap:"//m.vip.com/brand-{brand}-0-0-0-1-0-1-40.html?m=brand&brand_id={brand}&title={title}&source={source}&"+p,app:"vipshop://showBrandProducts?brandId={brand}&brandName={title}&"+p+"&extra_source_id="+s.extra_banner},product:{wap:"//m.vip.com/product-{brand}-{product}.html?m=product&brand_id={brand}&product_id={product}&title={title}&source={source}&"+p,app:"vipshop://showGoodsDetail?brandId={brand}&goodsId={product}&goodsType=0&goodsTitle={title}&w={VIP_WH}"+(+m?"&sourceType="+m:"&sourceType=0")+(0==_||1==_?"&isFromVis=true":"")+"&"+p,background:"//m.vip.com/product-{brand}-{product}.html?source={source}&wh={warehouse}&"+p},vis:{wap:"//m.vip.com/index.php?m=special&p={path}&h=mzt.vip.com&_src=vis&title={title}&"+p,app:"vis"==t?VIP.handleUrlParam(n):""},subchannel:{app:"vipshop://showChannel?channelID={channelID}&channelMenu={channelMenu}"},appCategory:{wap:"//m.vip.com/classify-list-{categoryId}-0-0-0-0-20.html?iswarmup={iswarmup}&"+p,app:"vipshop://categoryGoodsList?parentCategoryId={parentId}&categoryId={categoryId}&categoryName={categoryName}&"+p},index:{wap:"//m.vip.com",app:"//m.vip.com?m=home"},virtual:{wap:"//h5.vip.com/virtual/product-detail.html?product_id={product}",app:"vipshop://goH5?url={url}"}},f&&""!=f&&(s.extra_tag=f.replace(",","")),t){case"brand":var v="string"==typeof a;if(s.can_use_hercules){var y={brandId:n,brandName:i,source_tag:u,extra_source_id:s.extra_banner};return v&&(a=VIP.Util.parserUrlParam("?"+a)),$.extend(!0,y,a),void VIP.hercules({type:"shopping",name:"showBrandProducts",param:y,fail:function(){v&&VIP.notify_tips("您当前app版本暂不支持查看本分类",3e3)}})}v?VIP.notify_tips("暂不支持当前页浏览，请在APP内浏览",3e3):location.href=o.brand[c].replace(/{brand}/g,n).replace(/{title}/g,i).replace(/{source}/g,h);break;case"product":var n=n.split("-"),w=n[0],b=n[1];if(s.is_background&&(c="background"),w&&b)if(s.can_use_hercules){var y={goodsId:b,goodsType:"0",brandId:w,goodsTitle:i,w:"VIP_"+g.toUpperCase(),source_tag:d?u:"",from:"mst",sourceType:+m?"&sourceType="+m:"&sourceType=0"},P=function(e){console.error("[Hercules Error]: ",e)};a&&(y=Object.assign({},y,a)),VIP.hercules({type:"shopping",name:"showGoodsDetail",param:y,fail:P}),console.log("[After Call Hercules]: you just click the product")}else location.href=o.product[c].replace(/{brand}/g,w).replace(/{product}/g,b).replace(/{title}/g,i).replace(/{VIP_WH}/g,"VIP_"+g.toUpperCase()).replace(/{source}/g,h).replace(/{warehouse}/g,s.warehouse);break;case"vis":var I="";/mst.vip.com/.test(n)?location.href=VIP.handleUrlParam(n):(I=r(n),location.href=o.vis[c].replace(/{path}/g,I).replace(/{title}/g,i));break;case"subchannel":var n=n.split("|"),x=n[0],V=n[1];x&&V&&(s.can_use_hercules?VIP.hercules({type:"base",name:"showActivity",param:{name:"child_channel",params:{channelCode:x,channelMenu:V}},succ:function(e){0==e.code&&VIP.notify_tips("亲，程序出了点问题，请稍后再试！",3e3)},fail:function(e){s.is_app?VIP.notify_tips("您当前app版本暂不支持查看本分类频道，建议升级app新版本体验",3e3):VIP.notify_tips("当前小程序尚未开通此功能，敬请期待！",3e3)}}):VIP.notify_tips("本频道暂只支持在手机app端查看，请到手机端下载唯品会查看",3e3));break;case"app-category":var n=n.split("|"),S=n[0],k=n[1],C=$.trim(n[2]),T=$.trim(n[3]),A=$.trim(n[4]),L=$.trim(n[5]),O=$.trim(n[6]),j="";if(S&&k&&C)if(s.can_use_hercules){var y={parentCategoryId:S,categoryId:k,categoryName:C,source_tag:u};if(T)var E=T.split("-")[0],B=T.split("-")[1],U=T.split("-")[2]||"";if($.extend(!0,y,{landingOption:{abtest_id:E,product_id:B,label_id:U}}),A&&$.extend(!0,y,{iswarmup:A}),L){var D=L;O&&(D=L+":"+O),$.extend(!0,y,{newLabelIds:D})}VIP.hercules({type:"shopping",name:"categoryGoodsList",param:y,fail:function(){VIP.notify_tips("您当前app版本暂不支持查看本分类频道，建议升级app新版本体验",3e3)}})}else location.href=o.appCategory[c].replace(/{parentId}/g,S).replace(/{categoryId}/g,k).replace(/{categoryName}/g).replace(/{iswarmup}/g,A);break;case"index":s.can_use_hercules?VIP.hercules({type:"shopping",name:"goHome",param:{},fail:function(){VIP.notify_tips("您当前app版本暂不支持跳转到首页，建议升级app新版本体验",3e3)}}):location.href=o.index[c];break;case"url":n&&(a&&a.ignoreParam?location.href=n:location.href=VIP.handleUrlParam(n,a));break;case"virtual":var n=n.split("|"),b=$.trim(n[0]),t=n[1],j="";if(b){switch(+t){case 2:j="//trip.vip.com/mobile/product-detail.html?product_id="+b+"&_show_header=0";break;case 3:j="//h5.vip.com/virtual/cars-detail.html?car_product_id="+b+"&_show_header=0";break;default:j=o.virtual.wap.replace(/{product}/g,b)}j&&((s.is_iphone||s.is_android)&&VIP.compareVersion(s.app_version,"5.11")?location.href=o.virtual.app.replace(/{url}/g,encodeURIComponent(j)):s.is_wap||s.is_weixin?location.href=j:VIP.notify_tips("您当前app版本暂不支持本类型商品购买，建议到个人中心->设置 升级app",4e3))}break;case"live":var R=n.split("|"),M=R[0],N=R[1],F=N+"#"+M+"@video",H={group_id:F,type:M,id:N};VIP.goLiveRoomWithLiveState(H,p,!1);break;case"favbrand":s.can_use_hercules?VIP.hercules({type:"base",name:"showActivity",param:{name:"my_collection",params:{page_type:2}},fail:function(){VIP.notify_tips("您当前app版本暂不支持查看本分类档期，建议升级app版本或到我的特卖->品牌收藏中查找")}}):VIP.notify_tips("此功能暂只支持在手机app端查看，请到手机端下载唯品会查看");break;case"autoproduct":var n=n.split("|"),z=n[0],i=n[1];if(rule_id&&i)if(s.can_use_hercules){var y={rule_id:z,title:i};a&&(y=Object.assign({},y,a)),VIP.hercules({type:"base",name:"routeTo",param:{name:"search/auto_product_list",params:y},fail:function(e){VIP.notify_tips("您当前app版本暂不支持查看本分类频道，建议升级app新版本体验",3e3)}})}else VIP.notify_tips("本频道暂只支持在手机app端查看，请到手机端下载唯品会查看",3e3)}},VIP.getBrandRouterStr=function(e){var t=VIP.defaultParam.mars_cid||VIP.cookie("mars_cid"),n=e.brand_name&&e.brand_name.replace(/\"|\&quot\;/g,'\\"'),i=window.config.extend&&window.config.extend["switch"].enable_router_vis_shop||!1,a=!1;return t&&(t=t.substr(-1),t=parseInt(t,16),t%2===0?"":a=!0),"1"!==i?a=!0:"",a&&e.flag_ship_url&&e.flag_ship_url.trim("").length?'VIP.router(this, "url", "'+e.flag_ship_url+'", "'+n+'");':e.vis&&0==e.visType?'VIP.router(this, "vis", "'+e.vis+'", "'+n+'");':'VIP.router(this, "brand", '+e.brand_id+', "'+n+'");'},VIP.Mars={get:function(e,t){var e=e.split("|"),n=this.getTag(e,t),i=VIP.getQueryString("extra_tag")?VIP.getQueryString("extra_tag")+",":"",a=i+n,r={page:encodeURIComponent(document.title),wap_id:VIP.defaultParam.wap_id,special_id:VIP.defaultParam.special_id,banner_id:VIP.defaultParam.extra_banner,tag:a},o=t?t.split("_"):[];if(0==e.length)return r;switch(e[0]){case"brand":r.target_type=e[0],r.target_id=e[1],r.brand_id=e[1],r.brand_rank=t,r.brandtyp="0";break;case"product":r.target_type=e[0],r.target_id=e[2],r.brand_id=e[1],r.goods_id=e[2],r.brand_rank=t,r.brandtyp="1";break;case"url":e[0]&&(r.target_type=e[0]),e[1]&&(r.target_id=VIP.getIdByUrl(e[1]));break;default:e[0]&&(r.target_type=e[0]),e[1]&&(r.target_id=e[1]),o[0]&&(r.module=o[0]),o[1]&&(r.seq=o[1])}return r},set:function(e,t){var n=this,i=t?t:window.renderer.pluginList[e];i&&(++e,i.find("[mst-mars]").each(function(t,i){var a=$(this),r=a.attr("mst-mars")&&a.attr("mst-mars").split("|"),o=e+"_"+(t+1),s=r[0],c=n.getTag(r,o)||"",d=window.config.data.moduleList[e-1],l=t+1,u=VIP.getQueryString("extra_tag")?VIP.getQueryString("extra_tag")+",":"",p=u+c,f=d.model||{
m_name:""},g={open:"special_widget_expose",close:"special_slide_expose"},_=!0,m=g.open,h={widget:"mst_"+d.module_type_id+"_expose",m_id:d.id,m_name:f.m_name,module:e+"",seq:l+"",style_id:d.style_id,tag:p,target_type:d.module_type_id,target_id:""};switch("frontend"==window.config.data.page_data.page_show_type&&window.config.extend["switch"].marsExposureSead&&"1"!==window.config.extend["switch"].marsExposureSead&&(_=!1,m=g.close),a.attr("mars_exposure_sead",m),s){case"brand":r[1]&&(a.attr("mars_exposure_module","mst|brands|"+r[1]+"|"+o+"|0"),_&&(h.target_id=r[1],h.brand_id=r[1],h.brand_rank=o,h.brandtyp="0",a.attr("mars_post_data",JSON.stringify(h))));break;case"product":r[1]&&r[2]&&(a.attr("mars_exposure_module","mst|products|"+r[1]+"|"+o+"|1|"+r[2]),_&&(h.target_id=r[2],h.goods_id=r[2],h.brand_id=r[1],h.brand_rank=o,h.brandtyp="1",a.attr("mars_post_data",JSON.stringify(h))));break;case"r_album":case"url":var v=/^(http(s)?:)?\/\/mst.vip.com/;if(v.test(r[1])){var y="1"===VIP.getConfigValueByKey("extend","switch","is_mst_exposure_wapid")?VIP.getQueryStringByUrl(r[1],"wapid"):VIP.getQueryStringByUrl(r[1],"extra_banner");y=y?y.replace("_",""):0,y&&(a.attr("mars_exposure_module","mst|specials|"+y+"|"+o+"|2"),_&&(h.target_id=y,h.special_id=y,h.brand_rank=o,h.brandtyp="2",a.attr("mars_post_data",JSON.stringify(h))))}break;case"topic_in":var w=r[1].split("_"),b=w[0],P=w[1],I=w[2],x=w[3],V=w[4];a.attr("mars_exposure_module","mst|topic_in|"+b+"|"+P+"_"+I+"_"+x+"_"+V),_&&(h.target_id=b+"_"+P+"_"+I+"_"+x+"_"+V,h.brand_rank=o,h.brandtyp="9",a.attr("mars_post_data",JSON.stringify(h)));break;default:if(_){for(var S=0,k=0,C=0;C<r.length;C++)C===k&&(r[C].trim()&&(h[r[C].trim()]=r[C+1]||S),k+=2);a.attr("mars_post_data",JSON.stringify(h))}}a.attr("mst-rank",o),a.attr("mst-tag",c)}))},send:function(e,t,n){var i=VIP.Mars.get(t,n);Mar.Seed.request("mst","click",e,JSON.stringify(i))},getTag:function(e,t){var n=e[0],i=VIP.defaultParam.special_id||0,a=VIP.defaultParam.extra_banner||0,r="",o=(new Date).getTime(),s=a+"_"+i+"_"+t+"_"+o;switch(n){case"brand":r=e[1];break;case"product":r=e[2];break;case"url":r=VIP.getIdByUrl(e[1]);break;case"vis":r=VIP.getIdByUrl(e[1]);case"r_album":r=VIP.getQueryStringByUrl(e[1],"r_album_id")||0;break;default:r=e[1]?e[1]:0}return r=s+"_"+r}},win.JSBridge={callbackId:1,getCallbackId:function(){return this.callbackId++},callbackList:{},fnList:{onWebviewChange:function(e){},onShareClick:function(e){},permitVideo:function(e){}},callH5:function(e,t){var n=this.fnList[e];n&&n(t)},callNative:function(e,t,n,i){var a=this.getCallbackId(),r={method:e,params:t};n?this.callbackList[a]=$.extend({},{callback:n},r):this.callbackList[a]=r,i&&1==i?setTimeout(function(){location.href="vipshop://"+e+"?"+$.param(t)+"&callbackId="+a},200*a):location.href="vipshop://"+e+"?"+$.param(t)+"&callbackId="+a},onCallback:function(e,t){if(e){var n=this.callbackList[e].callback;n&&(n(t),delete this.callbackList[e])}}},VIP.Brand=function(e){require([win.mstRequire.path.brand],function(){new VIP.Brand(e)})},VIP.Product=function(e){require([win.mstRequire.path.product],function(){new VIP.Product(e)})},VIP.hercules=function(e){if(VIP.defaultParam.can_use_hercules){var t=function(){if(e.type&&e.name){console.log("[Hercules params]: ",e);var t=VH[e.type][e.name];e.param?t(e.param,e.succ,e.fail):t(e.succ,e.fail)}else console.log("hercules 缺少参数：type 或者 name！")};window.VH?t():require([win.mstRequire.path.hercule],function(){t()})}},VIP.getResysData=function(e){var t=$.extend(e.reqData,e.page);e.url&&(e.url=e.url.replace(/^http:/,"")),$.ajax({url:e.url,dataType:"jsonp",data:t}).done(function(t){200==t.code?e.callback&&e.callback(t):console.log("爆款推荐获取接口失败, code : "+t.code)}).fail(function(e){console.log("爆款推荐获取接口失败")})},VIP.getNewResysData=function(e){var t=$.extend(e.reqData,e.page);$.ajax({url:e.url,dataType:"jsonp",data:t}).done(function(t){t.result?e.callback&&e.callback(t):console.log("爆款推荐获取接口失败, code : "+t.code)}).fail(function(e){console.log("爆款推荐获取接口失败")})},VIP.fixImg=function(e,t){var n=e;return e&&""!=e&&VIP.Util.isImg(e)?(/^(http(s)?:)?\/\//.test(n)?(e=e.replace(/^http:/,""),e="brand"==t||"logo"==t||"store_logo"==t?e.replace(/c.vpimg(\d).com/,"a$1.vimage1.com/upload/brand").replace(/[av].vpimg(\d).com/,"a$1.vimage1.com"):e.replace(/[a-cv].vpimg(\d).com/,"a$1.vimage1.com")):e="2"===window.config.extend["switch"].is_img_h2_static?"//a.appsimg.com/upload/brand/"+e:win.h2ImgA+"/upload/brand/"+e,"brand"!=t&&"product"!=t&&"store_logo"!=t||(e=VIP.getClientImageSrc(e,t)),e):""},VIP.Coupon={getList:function(e,t){var n={mars_cid:VIP.defaultParam.mars_cid,wap_consumer:VIP.defaultParam.wap_consumer,app_version:VIP.defaultParam.app_version};"1"!=VIP.getSwitch("is_prevent_get_brand_coupon")&&($.extend(n,e),$.ajax({url:win.mstHost+"/Special/getCouponInfo",data:n,dataType:"jsonp",success:function(e){t&&t(e)}}))},doCoupon:function(e,t){var n={};$.extend(n,e),n.brand_id&&$.ajax({url:win.mstHost+"/Brand/bindCoupon",data:n,dataType:"jsonp",success:function(e){t&&t(e)}})},handleDoCoupon:function(e,t,n){var i="",a="",r=e.data,o=t?"仅限"+t+"<br/>":"";if(1==e.code){if(1!=e.num)return r&&$.each(r,function(e,t){a+='<p><span class="mst-dialog-coupon-fav">￥ '+t.fav+"</span> 满"+t.buy+"可用</p>"}),a=r&&e.num!=r.length?'<p class="mst-dialog-coupon-title">'+o+"已领取[部分券已被抢光]</p>"+a:'<p class="mst-dialog-coupon-title">'+o+"已领取"+e.num+"张券</p>"+a,VIP.dialog({title:"",ctn:a,Extendclass:"mst-dialog-coupon"}),!1;i="已获得"+r[0].fav+"元优惠券，滿"+r[0].buy+"元可用。"}else{if(13332==e.code)return console.log("领券失败！code:"+e.code),!1;i=e.msg,console.log("领券失败！code:"+e.code)}return i},getUserCouponStatusById:function(e){$.ajax({url:win.mstHost+"/Special/checkGetCoupon",dataType:"jsonp",data:{coupon_id:e.id}}).done(function(t){e.callback&&e.callback(t)}).fail(function(){console.warn("Special/checkGetCoupon ： 获取用户领券状态失败...")})},getCouponById:function(e){var t="红包已经被抢光，下次还有机会哒！";e.id&&e.plugin_id?$.ajax({url:win.mstHost+"/Special/getCouponV2",dataType:"jsonp",data:{coupon_id:e.id,plugin_id:e.plugin_id,app_name:e.app_name,app_version:e.app_version},success:function(t){e.callback&&e.callback(t)},error:function(){VIP.notify_tips(t)}}):(VIP.notify_tips(t),console.log("Special/getCoupon：param.id和param.plugin_id不能为空"))}},VIP["interface"]={queryPmsPrice:function(e,t){e&&e.length>0?$.ajax({url:win.mstHost+"/product/getPmsPriceByProductId",dataType:"jsonp",data:{param:e}}).done(function(e){t&&t(e)}).fail(function(){console.log("专享价接口获取失败！")}):console.log("专项价接口参数不正确！")},queryStagePrice:function(e,t){e&&e.length>0?$.ajax({url:win.mstHost+"/Pay/periodPay",dataType:"jsonp",data:{productList:e}}).done(function(e){t&&t(e)}).fail(function(){console.log("分期价接口获取失败！")}):console.log("分期价接口参数不正确！")},getUserConsumer:function(e){$.ajax({url:win.mstHost+"/Special/getUserType",dataType:"jsonp",data:{coupon_id:e.id}}).done(function(t){e.callback?e.callback(t):t.result||console.warn("Special/getUserType ： 获取用户类型失败...")}).fail(function(){console.warn("Special/getUserType ： 获取用户类型失败...")})},getBrandData:function(e){var e=$.extend({page_id:VIP.defaultParam.page_id,floor:"1f",mars_cid:VIP.defaultParam.mars_cid,is_personality:!0,plugin_id:"",offset:0,limit:30},e,{time:VIP.defaultParam.time,is_front:VIP.defaultParam.is_front});return $.ajax({url:window.mstHost+"/Special/getBrandData",dataType:"jsonp",data:e}).fail(function(e){console.log("获取档期数据失败")})},getProductData:function(e){var e=$.extend({page_id:VIP.defaultParam.page_id,floor:"1f",mars_cid:VIP.defaultParam.mars_cid,is_personality:!0,is_sinking:!0,plugin_id:"",offset:0,limit:30},e,{time:VIP.defaultParam.time,is_front:VIP.defaultParam.is_front});return $.ajax({url:window.mstHost+"/Special/getProductData",dataType:"jsonp",data:e}).fail(function(e){console.log("获取档期数据失败")})},getVisPgFilterProduct:function(e){var e=$.extend({page_id:VIP.defaultParam.page_id,floor:"1f",is_personality:!0,is_sinking:!0,is_pre_pay:"0",mars_cid:VIP.defaultParam.mars_cid,plugin_id:"",brand_id:"",offset:0,limit:20},e,{warehouse:VIP.defaultParam.warehouse,time:VIP.defaultParam.time,is_front:VIP.defaultParam.is_front});return $.ajax({url:window.mstHost+"/VisPublic/getVisPgFilterProduct",dataType:"jsonp",data:e}).fail(function(e){console.log("获取品购商品数据失败")})},IDMapping:function(e){return $.ajax({url:window.mstHost+"/product/IDMapping",dataType:"jsonp",data:e}).fail(function(e){console.log("获取64位ID映射接口失败")})},getPurchaseData:function(e){var e=$.extend({page_id:VIP.defaultParam.page_id,plugin_id:""},e,{time:VIP.defaultParam.time,is_front:VIP.defaultParam.is_front});return $.ajax({url:window.mstHost+"/Special/getPurchases",dataType:"jsonp",data:e}).fail(function(e){console.log("获取品购数据失败")})},getBrandWidthProductData:function(e){var t=VIP.defaultParam,e=$.extend({page_id:t.page_id,mars_cid:t.mars_cid,warehouse:t.warehouse,client:"phone",plugin_id:"",product_num:8,offset:0,limit:10},e,{time:t.time,from:t.is_front});return $.ajax({url:window.mstHost+"/special/getProductsInBrandV2",dataType:"jsonp",data:e}).fail(function(e){console.log("获取档期数据失败")})},getCategory:function(e){var t=VIP.defaultParam,e=$.extend({page_id:t.page_id,mars_cid:t.mars_cid,warehouse:t.warehouse,client:"phone"},e,{time:t.time,from:t.is_front});return e.page_id&&e.plugin_id&&e.warehouse?$.ajax({url:window.mstHost+"/Special/getCategoryByAsynchronous",dataType:"jsonp",data:e}).fail(function(e){console.log("获取品类数据失败")}):void console.log("getCategory接口参数不正确！")},checkStockByStockApi:function(e,t){function n(e){var t=e.split(",");return sliceArr(t,50)}function i(e){var t={code:200,data:[]},n=[],i=!1;return $.each(e,function(e,t){t&&200==t.code&&t.data&&(i=!0,n=n.concat(t.data))}),i&&(t.data=n),t}function a(e){if(e&&200===e.code){var t={};e.code=1,e.result=!0,e.data&&e.data.length&&$.each(e.data,function(e,n){t[n.id]=n}),e.data=t,delete e.info}return e}function r(t){$.extend(e,{mids:t.join(","),area_id:s.area_id,mars_cid:s.mars_cid,realSale:!1,stockType:0,is_mobile:1,is_old:s.is_old_consumer?1:0,fields:"min,max,stock,type"}),delete e.product_id;var n=new Promise(function(t,n){$.ajax({url:o,data:e,dataType:"jsonp"}).done(function(e){200==e.code&&t(e)}).fail(function(e){n(new Error("查询商品库存：fail to check stock，"+e))})}).then(function(e){return e})["catch"](function(e){return e});return n}var o="//stock.vip.com/merchandise/",s=VIP.defaultParam,c=n(e.product_id).map(function(e){return r(e)});return Promise.all(c).then(function(e){return e=a(i(e)),t?t(e):e.result?$.each(e.data,function(e,t){t&&$("[data-soldout-productid="+t+"]").show()}):console.log("查询商品库存：商品库存接口返回错误！"),Promise.resolve(e)})["catch"](function(e){console.log("查询商品库存：合并返回数据错误，",e)})}},VIP.Login={check:function(e,t,n){$.ajax({url:win.mstHost+"/Special/checkLoginStatus",dataType:"jsonp",data:e}).done(function(e){return t?void t(e):(e.result||VIP.Login.go(n),e.result)}).fail(function(){console.log("检查用户接口失败！")})},popup:function(e){"undefined"!=typeof loginDeal?VIP.Login.showPopup(e):$("<link>").attr({rel:"stylesheet",type:"text/css",href:"https://mlogin.vip.com/asserts/css/login.css"}).on("load",function(){$.getScript("https://mlogin.vip.com/asserts/js/login-deal.min.js",function(){VIP.Login.showPopup(e)})}).appendTo("head")},showPopup:function(e){loginDeal.go({usePop:!0,needReg:!1,isWeixinLogin:!0,isviva:!1,backUrl:encodeURIComponent(location.href),onWinLogin:function(){e.afterLoginCallback?e.afterLoginCallback():VIP.notify_tips("登录成功！")},onBeforeJumpLogin:function(){}}),VIP.Loading.hide()},go:function(e){var t=VIP.getConfigValueByKey("extend","switch","is_popup_login")||1,e=$.extend(!0,{isPopUpLogin:1},e);VIP.defaultParam.can_use_hercules?VIP.hercules({type:"user",name:"login"}):1===e.isPopUpLogin&&"1"===t?VIP.Login.popup(e):window.location.href="https://mlogin.vip.com/user-login.html?&back_act="+encodeURIComponent(location.href)}},VIP.init=function(){return $.ajaxSetup({beforeSend:function(e,t){var n=/\.js|css$/;"GET"===t.type.toUpperCase()&&t.url&&!n.test(t.url.split("?")[0])&&(t.url=VIP.Util.addParamToUrl(t.url,"mst_csrf_key",VIP.cookie("mst_csrf_key")),t.url=VIP.Util.addParamToUrl(t.url,"area_id",VIP.defaultParam.area_id),t.url=VIP.Util.addParamToUrl(t.url,"fdc_area_id",getFdcAreaId(VIP.defaultParam.warehouse)),t.url.indexOf("/PrePay/getStock")!==-1&&(t.url=VIP.Util.addParamToUrl(t.url,"page_id",VIP.defaultParam.page_id))),t.showLoading&&VIP.Loading.show()},complete:function(){VIP.Loading.hide()}}),"true"===VIP.getQueryString("extra_debug")&&(window.extra_debug="true"),window.alert=function(e){return function(t){"true"===window.extra_debug?e(t):console.warn("提示：url增加extra_debug=true，才会执行alert")}}(window.alert),function(){}}(),VIP.Rem.init(),win.config&&win.config.data&&(VIP.easterEggs={count:0,timing:0,info:{page_id:{label:"专题id",data:config.data.id+""},special_name:{label:"专题名称",data:$("title").text()},start_time:{label:"开始时间",data:config.data.page_data.start_time},end_time:{label:"结束时间",data:config.data.page_data.end_time},warehouse:{label:"分仓",data:VIP.defaultParam.warehouse},user_type:{label:"用户类型",data:config.extend.user_type.user_type},cdi_type:{label:"用户群体",data:config.extend.cdi_type&&config.extend.cdi_type.join(",")},special_cdi_type:{label:"用户群体",data:config.extend.user_type.userGroupId&&config.extend.user_type.userGroupId.join(",")},net:{label:"网络环境",data:VIP.defaultParam.net},client:{label:"客户端",data:VIP.defaultParam.client},app_name:{label:"App名称",data:VIP.defaultParam.app_name},app_version:{label:"App版本",data:VIP.defaultParam.app_version},brands:{label:"页面档期数",data:[]},products:{label:"页面商品数",data:[]},log:{label:"组件报错信息",data:[]}},timedCount:function(){this.count<4?(this.count+=1,this.timing=setTimeout(function(){VIP.easterEggs.timedCount()},1e3)):4==this.count?(this.showInfo(this.info),this.resetTime()):this.resetTime()},resetTime:function(){this.count=0,clearTimeout(VIP.easterEggs.timing)},showInfo:function(e){var t='<li class="u-border-b">${label}: {{html data}}</li>',n=$("<ul></ul>"),i="";$.each(e,function(e,a){a.data&&a.data.length&&(i=$.tmpl(t,a),n.append(i))}),VIP.floatLayer({title:"彩蛋信息",ctn:n[0].outerHTML}),$("html").addClass("scroll-fix")},show:function(){this.showInfo(this.info)}}),VIP.Communication=function(){var e=$(document),t=[];return{dispatch:function(t){e.trigger(t,arguments)},listen:function(n,i,a){e.on(n,a,i),t.indexOf(n)===-1&&"component-event-broadcast"!=n?t.push(n):console.log(n+"该事件已经注册，请确保是否有污染！")},getEventList:function(){return t}}}();var FloorPlaceholder=function(){function e(){var e=function(e,t){if(a&&a[e]){var n=a[e].replace(/\s/g,"");return t?n.split(","):n}};return{brandTwoCol:e("brand_two_col",!0)||[1121,1189],brandOneCol:e("brand_one_col",!0)||[1120,1470],productTwoCol:e("product_two_col",!0)||[1431,1185]}}function t(){var e=['<style id="tempstyle">',"</style>"],t=['.plugin .layout-layer .boxholder, .plugin .layout-layer .line-boxholder{background:#FCFAFD url("//h2.vipstatic.com/mst.vipstatic.com/demo/image/img-loading.png") center center no-repeat; background-size: 1.2rem auto; }',".plugin .layout-layer .boxholder {height: 8.27574rem; border: 1px solid #f5f1f1;}",".plugin .mst-brand-v3-one .boxholder {height: 7.19225rem; }",".tupian-box-holders{width: 100%; margin: 0 auto; position: relative; overflow: hidden;}",".line-boxholder + .line-boxholder{margin-top: 5px;}",".plugin-countdown-wrap{position: relative;}",".pingou-lazy{background-image:none !important;}",".layout-layer .mst-brand-v3 .mst-brand-item::after{display:none;}",".brand-boxholder-list{padding: 0 .06666666666666667rem; overflow:hidden;}"];e=e.slice(0,1).concat(t).concat(e.slice(1,2)).join("\n"),$(e).appendTo("head")}function n(e,t,n){function i(){n.css("backgroundImage","none")}function a(e){e.css({position:"absolute",width:"100%"})}function r(e,t){function n(e,t){return Math.ceil(e/t)}t=t||h;for(var i=300,a=t*e.height,r=n(a,i)||100,o=a/r,s=[];r--;)s.push(o);return s}function o(e){function t(t){var i=function(){var t,n,i=/isResys\s*?:\s*([^,]+)/m,a=window.config.data.jsList[e.style_id];return!!a&&(!!(n=a.match(i))&&(t=n[1]&&n[1].replace(/\s/g,"").toLowerCase(),t===(!0).toString()))},a=i(),r=window.config.extend.server_time,o=r?new Date(1e3*r):new Date,s=e.brand_names||[];return a&&!e.model.resysd_fields?t=[]:a?(t=t.filter(function(e,t){return VIP.stringToDate(e.sell_time_to)>o}),t=t.reduce(function(e,t){s.indexOf(t.name)<-1&&(s.push(t.name),e.push(t))},[])):"brand"===n?t.forEach(function(e,t){var n=VIP.isInSale(1e3*e.sell_time_to);n&&(e.hide=!0)}):"product"===n&&t.forEach(function(e,t){e.is_show=e.product_id&&(e.is_effective||new Date(1e3*e.sellTimeTo)>o)}),t}e=$.extend(!0,{},e);var n=e.module_type_id;return e.data=t(e.data),e}function c(e){var t,n=s.brandOneCol.indexOf(_)>-1,i=e.extend&&e.extend.layout,a={brandCls:"",imgKey:"mobile_image_two"};if(n&&(a.brandCls="mst-brand-v3-one",a.imgKey="mobile_image_one"),f='<div class="plugin-brand"> <div class="mst-brand mst-brand-v3 <%=brandCls%>"> <div class="mst-brand-wrap"> <div class="brand-boxholder-list mst-brand-v3-list clearfix"> </div> </div> </div> <script type="text/x-jquery-tmpl"> {{each(i,brand) data}} {{if !brand.hide && brand.<%=imgKey%> != ""}} <div class="mst-brand-item" {{if hide}}style="display:none" {{/if}}> <div class="mst-brand-item-wrap boxholder"></div> </div> {{/if}} {{/each}} </script> </div>',f=f.replace(/<%=(\w+)%>/g,function(e,t){return a[t]}),v.html(f),t=v.find(".brand-boxholder-list"),t.append(v.find("script:first").tmpl(o(e))),i&&i.height){var r=t.find(".boxholder"),c=Math.ceil(r.length/(n?1:2)),d=m/i.width*i.height/c,l=.21333333333333332*parseFloat($("html").css("fontSize"));r.height(d-l)}}function d(e){function t(e){var t,n,i=window.config,a=i&&i.extend,r=e.model;if(!a||!r)return!0;if(t=a.server_time&&parseInt(a.server_time),n=r.live,!t||!n)return!0;var o=function(e){return VIP.stringToDate(e)/1e3},s=n.start_time&&t<o(n.start_time),c=n.end_time&&t>o(n.end_time);return!s&&!c||(console.log("head 不在定时任务范围"),!1)}var n=e.extend&&e.extend.layout;if(t(e)&&n&&n.height){f='<div class="tupian-box-holders"><script type="text/x-jquery-tmpl">{{each(i, height) heights}}<div style="height:${height-5}px; margin-bottom: 5px;" class="line-boxholder"></div>{{/each}}</script></div>',v.html(f);var i=v.find(".tupian-box-holders");v.find("script:first").tmpl({heights:r(n)}).prependTo(i)}}function l(e){function t(e){var t=VIP.getQueryString("client"),n=t&&t.indexOf("pad")>-1,i=e.model,a=i[n?"pad_pic_src":"phone_pic_src"];return a||i.phone_pic_src}function n(e,t){var n=[],i=t.extend.layout,a=e.width?m/e.width:h;return"string"==typeof e?n=r(i,a):e.imgs?e.imgs.forEach(function(){n.push(e.average_height*a)}):n=r(i,a),n}if(e.model&&!Array.isArray(e.model)){f='<div class="pingou-boxholder-list plugin-pingou-640"><script type="text/x-jquery-tmpl">{{each(i, height) heights}}<div class="line-boxholder" style="height:${height-5}px; margin-bottom: 5px;"></div>{{/each}}</script></div>';var i,a=t(e),o=n(a,e);v.html(f),i=v.find(".pingou-boxholder-list"),v.find("script:first").tmpl({heights:o}).prependTo(i)}}function u(e){var t=e.extend&&e.extend.layout;if(t){var n='<div class="line-boxholder" style="height:${height}px;"></div>',i=m/t.width*t.height;$(n).css({height:i-5,marginBottom:5}).appendTo(v)}}function p(e){var t,n=e.extend.layout,i='<div class="plugin-product-holder"> <div class="mst-product mst-product-v3"> <div class="mst-product-wrap"> <div class="mst-product-v3-list product-boxholder-list clearfix"> </div> </div> </div> <script type="text/x-jquery-tmpl"> {{each(i,product) data}} {{if product.is_show && product.small_image != ""}} <div class="mst-item"> <div class="mst-item-wrap boxholder"></div> </div> {{/if}} {{/each}} </script> </div>';if(v.html(i),t=v.find(".product-boxholder-list"),t.append(v.find("script:first").tmpl(o(e))),n&&n.height){var a=t.find(".boxholder"),r=Math.ceil(a.length/2),s=m/n.width*n.height/r,c=.21333333333333332*parseFloat($("html").css("fontSize"));a.css({paddingBottom:0,height:s-c})}}var f,g=e.module_type_id,_=e.style_id,m=document.documentElement.clientWidth,h=Math.min(1,m/540),v=$('<div class="layout-layer"/>');switch(v.appendTo(n),!0){case s.brandTwoCol.indexOf(_)>-1:case s.brandOneCol.indexOf(_)>-1:c(e);break;case"head"===g:d(e);break;case"purchase"===g:l(e);break;case["countdown","coupon"].indexOf(g)>-1:u(e);break;case s.productTwoCol.indexOf(_)>-1:p(e)}a(v),i()}function i(e,t,n){function i(){"_DEBUG_"!==r&&n.find(".layout-layer").remove()}var a,o=e.module_type_id,s="head"===o,c="purchase"===o;s?setTimeout(function(){a=n.find(".plugin-tupian img:first"),a.on("load",function(){var e=this.src.indexOf("placeholder")>-1;!e&&i()}).on("error",function(){i()})},10):c?(e.loadedCount=0,setTimeout(function(){var t=n.find(".pingou-lazy");t.on("load",function(){var n=this.src.indexOf("placeholder")>-1;n||(e.loadedCount++,e.loadedCount===t.length&&i())}).on("error",function(){e.loadedCount++,e.loadedCount===t.length&&i()})},10)):i()}var a,r=!1,o=document.documentElement.clientWidth>632,s={},c=["",0,void 0,"false","0",!1,null],d={paint:n,remove:i,enable:!1};if("undefined"==typeof window.config)return d;a=window.config.extend["switch"];try{r=c.indexOf(a.is_floor_placeholder)<0&&a.is_floor_placeholder}catch(l){console.warn("获取开关出错: config.extend.switch.is_floor_placeholder")}return o&&"_DEBUG_"!==r&&(r=!1),r&&(s=e(),t(),d.enable=r),d}();VIP.AnchorCorrection=function(){var e=VIP.getSwitch("is_anchor_correct"),t={enabled:!!e,isUserscroll:!1,inFixedNavbar:!0,fixedNavbar:"nav",clickedAnchor:null,container:"#specialContent",observeOpts:{attributes:!0,childList:!0,subtree:!0},anchorSelector:"[rel-anchor]",inFixedSelector:"[rel-fixed]",targetAttr:"data-anchor-name",targetFloor:"",getMutationObserver:function(){return window.MutationObserver||window.WebkitMutationObserver||window.MozMutationObserver},checkAnchorFixed:function(e){return this.inFixedNavbar=$(e).parents("nav").length>0||$(e).is(this.inFixedSelector),this.inFixedNavbar},getTargetFloor:function(){var e=this.clickedAnchor.attr("rel-anchor")||"NULL";return $("["+this.targetAttr+"="+e+"]").eq(0)},assertNotUserscroll:function(){var e=this;e.isUserscroll=!1},listenDomChange:function(){var e=this,t=e.getMutationObserver();if(!t)return void console.warn("不支持 MutationObserver");var n=new t(function(t){var n=document.body.clientHeight;e.tempHeight!==n&&(e.enabled&&!e.isUserscroll&&e.clickedAnchor&&e._correct(),e.tempHeight=n)});n.observe($(e.container)[0],e.observeOpts)},_correct:function(){var e,t,n=this.targetFloor;if(!n||!n.length)return void console.log("目标楼层不存在..");if(this.inFixedNavbar){e=this.clickedAnchor.closest(this.fixedNavbar);var i=this.clickedAnchor.attr("rel-anchor-height");i?e=$("."+i):e.length||(e=this.clickedAnchor);var a=e.height();t=Math.ceil(n.offset().top)-Math.floor(a)}else t=Math.ceil(n.offset().top);window.scrollTo(0,t),this.assertNotUserscroll()},bindEvents:function(){var e=this;$("body").on("click",e.anchorSelector,function(t){e.checkAnchorFixed(this),e.clickedAnchor=$(this),e.targetFloor=e.getTargetFloor(),e.assertNotUserscroll()});var t=window.TouchEvent?"touchstart":"scroll";$(window).on(t+" wheel",function(){e.isUserscroll=!0})},disable:function(){this.enabled=!1},enable:function(){this.enabled=!0},correct:function(e,t,n,i){if(!e)return void console.log("缺少参数 targetFloor..");this.enable(),this.isUserscroll=!1,this.start(),this.clickedAnchor=$(t||"<a/>").eq(0),this.targetFloor=$(e).eq(0),this.inFixedNavbar=!!n,$.extend(this,i||{});var a=$('<i style="display:none"></i>');a.appendTo(this.container),setTimeout(function(){a.remove()},10)},start:function(){this.enabled&&!this.started&&(this.started=!0,this.bindEvents(),this.listenDomChange())}};return t}(),$(function(){VIP.AnchorCorrection.enabled&&VIP.AnchorCorrection.start()}),VIP.SupportNavbars=function(){var e,t,n={},i=VIP.getSwitch("is_support_navbars"),a={enable:!!i,isFreshData:1,baseZindex:100,navData:[],getNavbarClass:function(){var e,t=/^(\d|true|false)/;return!t.test(i)&&(e=i),e="string"==typeof e?e.replace(/^\./,""):"mst-navbar"},getParams:function(){return{navbarClass:e,spyAttr:"spy-"+e,wrapClass:e+"-wrap"}},getSelecotr:function(){return this.parseVars(this.isFreshData?".${navbarClass}":".${navbarClass}:not([${spyAttr}])",n)},findIndex:function(e,t){var n,i;n=i=e.length;for(var a=0;a<i;a++)if(e[a]>t){n=a;break}return n},parseVars:function(e,t){return e.replace(/\$\{(\w+)\}/g,function(e,n){return t[n]})},setNavStaticFrom:function(e){this.navData.forEach(function(t,n){n>=e&&t.$el.css({position:"",top:""})})},setNavAbsoluteTo:function(e,t){var n=this.navData,i=n.map(function(e,n){var i=t[n+1];return i?i-e.$el.parent().offset().top:"NONEED"});this.topValues=i,n.forEach(function(t,n){n<=e&&t.$el.css({position:"absolute",top:i[n]})})},wrapperSetHeight:function(e){e.parent().height(function(t,n){return e.eq(t).height()}).css("position","relative")},setStyleAndWrap:function(e){var t=this;e.each(function(e,i){$(i).attr(n.spyAttr)||($(i).parent().is(".plugin-nav")&&$(i).css("maxWidth","632px"),$(i).css("transform",function(e,t){return t+" translateZ(0)"}).attr(n.spyAttr,!0).wrap(t.parseVars('<div class="${wrapClass}"/>',n)))})},getNavData:function(){var e=$(t),i=this.baseZindex,a=this.navData,r=function o(){if(e.last().height()){this.wrapperSetHeight(e);var t=e.map(function(e,t){return{top:$(t).parent().offset().top,$el:$(t),h:$(t).height()}}).get();this.isFreshData&&a.splice(0,a.length),a.push.apply(a,t),a.sort(function(e,t){return e.top-t.top}),a.forEach(function(e,t){e.$el.css("zIndex",t+1+i)})}else this.timer&&clearTimeout(this.timer),this.timer=setTimeout(o.bind(this),30)};e.length&&(this.setStyleAndWrap(e,n),r.call(this))},onScroll:function(e){var t,n,i,a,r=document.body.scrollTop,o=this.navData;return this.getNavData(),o.length?(t=o.map(function(e,t){var n=o[t-1],i=n?n.h:0;return e.top-i}),n=o.map(function(e){return e.top}),i=this.findIndex(t,r),a=this.findIndex(n,r),i>a?this.setNavAbsoluteTo(a-1,t):a>0&&(o[a-1].$el.css({position:"fixed",top:0}),this.setNavAbsoluteTo(a-2,t)),this.setNavStaticFrom(a),void(this.log||(this.log=function(){console.log("[log]\n absLines:%o, \n fixLines:%o, \n topValues:%o, \n absIndex:%d, \n fixIndex:%d",t,n,this.topValues,i,a)}))):((this.tipTimes||0)<3&&console.log("no navData.."),void(this.tipTimes=(this.tipTimes||0)+1))},listenScroll:function(){$(window).on("scroll",this.onScroll.bind(this))},start:function(){e=this.getNavbarClass(),n=this.getParams(),t=this.getSelecotr(),this.getNavData(),this.listenScroll()}};return a}(),$(function(){VIP.SupportNavbars.enable&&VIP.SupportNavbars.start()}),VIP.appUI={showMenu:function(){VIP.hercules({type:"ui",name:"showMenu"})},hideMenu:function(){VIP.hercules({type:"ui",name:"hideMenu"})}},VIP.transBrandWidthProductAjaxData=function(e,t){var n=[],i={};$.each(t,function(e,t){var a=t.brand;a&&n.push(a),t.products&&(i[a.brand_id]=t.products)}),e.data=n,e.extend_data=i},VIP.arouseApp={WX:null,wxReady:!1,wxReadyCBFs:[],canWakeup:!1,appId:null,schemeUrl:null,gettingSignature:!1,getSignatured:!1,curUrl:window.location.href.split("#")[0],getSignature:function(){var e=this;e.gettingSignature=!0;var t={url:this.curUrl};$.ajax({url:"//weixin-api.vip.com/v2/jsSdk/getSignature",data:t,dataType:"jsonp",jsonp:"jsonp",cache:!1,success:function(t){e.appId=t.data.appid;var n={debug:!1,appId:t.data.appid,timestamp:t.data.timestamp,nonceStr:t.data.noncestr,signature:t.data.signature,beta:!0,jsApiList:["launchApplication"]};e.getSignatured=!0,e.gettingSignature=!1,e.WX.config(n)},fail:function(t){e.gettingSignature=!1,console.log(t)}})},ready:function(e){this.wxReady&&e&&"function"==typeof e?e():this.wxReadyCBFs.push(e)},isNewWechat:function(e){var t=/micromessenger\/([\d.]+)/i,n=e.match(t),i=Array.isArray(n)?n[1].split("."):null;return null!==i&&(parseInt(i[0],10)>6||!(parseInt(i[0],10)<6)&&(parseInt(i[1],10)>5||!(parseInt(i[1],10)<5)&&(parseInt(i[2],10)>=16||(parseInt(i[2],10)<16,!1))))},invokeLaunchApp:function(e){var t={appID:this.appId,schemeUrl:e.schemeUrl};window.WeixinJSBridge&&window.WeixinJSBridge.invoke&&window.WeixinJSBridge.invoke("launchApplication",t,e.onLaunch)},wakeup:function(e){this.isNewWechat(navigator.userAgent)&&(e.onLaunch&&"function"==typeof e.onLaunch||(e.onLaunch=this.defaultOpts.onLaunch),window.WeixinJSBridge?this.invokeLaunchApp(e):document.addEventListener("WeixinJSBridgeReady",function(){this.invokeLaunchApp(e)}))},defaultOpts:{schemeUrl:this.schemeUrl,onLaunch:function(e){e.err_msg.indexOf("launchApplication:fail_check fail")>-1?VIP.notify_tips("打开失败，请重试"):e.err_msg.indexOf("launchApplication:fail")>-1&&VIP.notify_tips("打开失败，请检查是否已安装唯品会APP")}},init:function(e){var t=this;t.canWakeup=!0,t.wxReady?e&&"function"==typeof e&&e():(e&&"function"==typeof e&&t.wxReadyCBFs.push(e),require(["//res.wx.qq.com/open/js/jweixin-1.2.0.js"],function(e){t.WX=e,t.getSignatured||t.gettingSignature||t.getSignature(),t.WX.ready(function(){for(;t.wxReadyCBFs.length;)t.wxReadyCBFs.pop()();t.wxReady=!0})}))}},win.renderer=new Renderer,win.config&&(VIP.currUser=User.initWithConfig(),VIP.currPage=new Page$1,win.renderer.init({config:win.config}))})}();